{"version":3,"file":"dome.js","sources":["../src/GLConstant.ts","../src/Helper.ts","../src/vertexIndex.ts","../src/vertexAttribute.ts","../src/geometryInfo.ts","../src/state.ts","../src/programInfo.ts","../src/glconstant.ts","../src/texture.ts","../src/twebgl.ts","../examples/matwithTex.ts","../examples/main.ts"],"sourcesContent":["/**\r\n * Enum containing WebGL Constant values by name.\r\n * for use without an active WebGL context, or in cases where certain constants are unavailable using the WebGL context\r\n * (For example, in [Safari 9]{@link https://github.com/AnalyticalGraphicsInc/cesium/issues/2989}).\r\n *\r\n * These match the constants from the [WebGL 1.0]{@link https://www.khronos.org/registry/webgl/specs/latest/1.0/}\r\n * and [WebGL 2.0]{@link https://www.khronos.org/registry/webgl/specs/latest/2.0/}\r\n * specifications.\r\n */\r\nexport enum GlConstants {\r\n    DEPTH_BUFFER_BIT = 0x00000100,\r\n    STENCIL_BUFFER_BIT = 0x00000400,\r\n    COLOR_BUFFER_BIT = 0x00004000,\r\n    POINTS = 0x0000,\r\n    LINES = 0x0001,\r\n    LINE_LOOP = 0x0002,\r\n    LINE_STRIP = 0x0003,\r\n    TRIANGLES = 0x0004,\r\n    TRIANGLE_STRIP = 0x0005,\r\n    TRIANGLE_FAN = 0x0006,\r\n    ZERO = 0,\r\n    ONE = 1,\r\n    SRC_COLOR = 0x0300,\r\n    ONE_MINUS_SRC_COLOR = 0x0301,\r\n    SRC_ALPHA = 0x0302,\r\n    ONE_MINUS_SRC_ALPHA = 0x0303,\r\n    DST_ALPHA = 0x0304,\r\n    ONE_MINUS_DST_ALPHA = 0x0305,\r\n    DST_COLOR = 0x0306,\r\n    ONE_MINUS_DST_COLOR = 0x0307,\r\n    SRC_ALPHA_SATURATE = 0x0308,\r\n    FUNC_ADD = 0x8006,\r\n    BLEND_EQUATION = 0x8009,\r\n    BLEND_EQUATION_RGB = 0x8009, // same as BLEND_EQUATION\r\n    BLEND_EQUATION_ALPHA = 0x883d,\r\n    FUNC_SUBTRACT = 0x800a,\r\n    FUNC_REVERSE_SUBTRACT = 0x800b,\r\n    BLEND_DST_RGB = 0x80c8,\r\n    BLEND_SRC_RGB = 0x80c9,\r\n    BLEND_DST_ALPHA = 0x80ca,\r\n    BLEND_SRC_ALPHA = 0x80cb,\r\n    CONSTANT_COLOR = 0x8001,\r\n    ONE_MINUS_CONSTANT_COLOR = 0x8002,\r\n    CONSTANT_ALPHA = 0x8003,\r\n    ONE_MINUS_CONSTANT_ALPHA = 0x8004,\r\n    BLEND_COLOR = 0x8005,\r\n    ARRAY_BUFFER = 0x8892,\r\n    ELEMENT_ARRAY_BUFFER = 0x8893,\r\n    ARRAY_BUFFER_BINDING = 0x8894,\r\n    ELEMENT_ARRAY_BUFFER_BINDING = 0x8895,\r\n    STREAM_DRAW = 0x88e0,\r\n    STATIC_DRAW = 0x88e4,\r\n    DYNAMIC_DRAW = 0x88e8,\r\n    BUFFER_SIZE = 0x8764,\r\n    BUFFER_USAGE = 0x8765,\r\n    CURRENT_VERTEX_ATTRIB = 0x8626,\r\n    FRONT = 0x0404,\r\n    BACK = 0x0405,\r\n    FRONT_AND_BACK = 0x0408,\r\n    CULL_FACE = 0x0b44,\r\n    BLEND = 0x0be2,\r\n    DITHER = 0x0bd0,\r\n    STENCIL_TEST = 0x0b90,\r\n    DEPTH_TEST = 0x0b71,\r\n    SCISSOR_TEST = 0x0c11,\r\n    POLYGON_OFFSET_FILL = 0x8037,\r\n    SAMPLE_ALPHA_TO_COVERAGE = 0x809e,\r\n    SAMPLE_COVERAGE = 0x80a0,\r\n    NO_ERROR = 0,\r\n    INVALID_ENUM = 0x0500,\r\n    INVALID_VALUE = 0x0501,\r\n    INVALID_OPERATION = 0x0502,\r\n    OUT_OF_MEMORY = 0x0505,\r\n    CW = 0x0900,\r\n    CCW = 0x0901,\r\n    LINE_WIDTH = 0x0b21,\r\n    ALIASED_POINT_SIZE_RANGE = 0x846d,\r\n    ALIASED_LINE_WIDTH_RANGE = 0x846e,\r\n    CULL_FACE_MODE = 0x0b45,\r\n    FRONT_FACE = 0x0b46,\r\n    DEPTH_RANGE = 0x0b70,\r\n    DEPTH_WRITEMASK = 0x0b72,\r\n    DEPTH_CLEAR_VALUE = 0x0b73,\r\n    DEPTH_FUNC = 0x0b74,\r\n    STENCIL_CLEAR_VALUE = 0x0b91,\r\n    STENCIL_FUNC = 0x0b92,\r\n    STENCIL_FAIL = 0x0b94,\r\n    STENCIL_PASS_DEPTH_FAIL = 0x0b95,\r\n    STENCIL_PASS_DEPTH_PASS = 0x0b96,\r\n    STENCIL_REF = 0x0b97,\r\n    STENCIL_VALUE_MASK = 0x0b93,\r\n    STENCIL_WRITEMASK = 0x0b98,\r\n    STENCIL_BACK_FUNC = 0x8800,\r\n    STENCIL_BACK_FAIL = 0x8801,\r\n    STENCIL_BACK_PASS_DEPTH_FAIL = 0x8802,\r\n    STENCIL_BACK_PASS_DEPTH_PASS = 0x8803,\r\n    STENCIL_BACK_REF = 0x8ca3,\r\n    STENCIL_BACK_VALUE_MASK = 0x8ca4,\r\n    STENCIL_BACK_WRITEMASK = 0x8ca5,\r\n    VIEWPORT = 0x0ba2,\r\n    SCISSOR_BOX = 0x0c10,\r\n    COLOR_CLEAR_VALUE = 0x0c22,\r\n    COLOR_WRITEMASK = 0x0c23,\r\n    UNPACK_ALIGNMENT = 0x0cf5,\r\n    PACK_ALIGNMENT = 0x0d05,\r\n    MAX_TEXTURE_SIZE = 0x0d33,\r\n    MAX_VIEWPORT_DIMS = 0x0d3a,\r\n    SUBPIXEL_BITS = 0x0d50,\r\n    RED_BITS = 0x0d52,\r\n    GREEN_BITS = 0x0d53,\r\n    BLUE_BITS = 0x0d54,\r\n    ALPHA_BITS = 0x0d55,\r\n    DEPTH_BITS = 0x0d56,\r\n    STENCIL_BITS = 0x0d57,\r\n    POLYGON_OFFSET_UNITS = 0x2a00,\r\n    POLYGON_OFFSET_FACTOR = 0x8038,\r\n    TEXTURE_BINDING_2D = 0x8069,\r\n    SAMPLE_BUFFERS = 0x80a8,\r\n    SAMPLES = 0x80a9,\r\n    SAMPLE_COVERAGE_VALUE = 0x80aa,\r\n    SAMPLE_COVERAGE_INVERT = 0x80ab,\r\n    COMPRESSED_TEXTURE_FORMATS = 0x86a3,\r\n    DONT_CARE = 0x1100,\r\n    FASTEST = 0x1101,\r\n    NICEST = 0x1102,\r\n    GENERATE_MIPMAP_HINT = 0x8192,\r\n    BYTE = 0x1400,\r\n    UNSIGNED_BYTE = 0x1401,\r\n    SHORT = 0x1402,\r\n    UNSIGNED_SHORT = 0x1403,\r\n    INT = 0x1404,\r\n    UNSIGNED_INT = 0x1405,\r\n    FLOAT = 0x1406,\r\n    DEPTH_COMPONENT = 0x1902,\r\n    ALPHA = 0x1906,\r\n    RGB = 0x1907,\r\n    RGBA = 0x1908,\r\n    LUMINANCE = 0x1909,\r\n    LUMINANCE_ALPHA = 0x190a,\r\n    UNSIGNED_SHORT_4_4_4_4 = 0x8033,\r\n    UNSIGNED_SHORT_5_5_5_1 = 0x8034,\r\n    UNSIGNED_SHORT_5_6_5 = 0x8363,\r\n    FRAGMENT_SHADER = 0x8b30,\r\n    VERTEX_SHADER = 0x8b31,\r\n    MAX_VERTEX_ATTRIBS = 0x8869,\r\n    MAX_VERTEX_UNIFORM_VECTORS = 0x8dfb,\r\n    MAX_VARYING_VECTORS = 0x8dfc,\r\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8b4d,\r\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8b4c,\r\n    MAX_TEXTURE_IMAGE_UNITS = 0x8872,\r\n    MAX_FRAGMENT_UNIFORM_VECTORS = 0x8dfd,\r\n    SHADER_TYPE = 0x8b4f,\r\n    DELETE_STATUS = 0x8b80,\r\n    LINK_STATUS = 0x8b82,\r\n    VALIDATE_STATUS = 0x8b83,\r\n    ATTACHED_SHADERS = 0x8b85,\r\n    ACTIVE_UNIFORMS = 0x8b86,\r\n    ACTIVE_ATTRIBUTES = 0x8b89,\r\n    SHADING_LANGUAGE_VERSION = 0x8b8c,\r\n    CURRENT_PROGRAM = 0x8b8d,\r\n    NEVER = 0x0200,\r\n    LESS = 0x0201,\r\n    EQUAL = 0x0202,\r\n    LEQUAL = 0x0203,\r\n    GREATER = 0x0204,\r\n    NOTEQUAL = 0x0205,\r\n    GEQUAL = 0x0206,\r\n    ALWAYS = 0x0207,\r\n    KEEP = 0x1e00,\r\n    REPLACE = 0x1e01,\r\n    INCR = 0x1e02,\r\n    DECR = 0x1e03,\r\n    INVERT = 0x150a,\r\n    INCR_WRAP = 0x8507,\r\n    DECR_WRAP = 0x8508,\r\n    VENDOR = 0x1f00,\r\n    RENDERER = 0x1f01,\r\n    VERSION = 0x1f02,\r\n    NEAREST = 0x2600,\r\n    LINEAR = 0x2601,\r\n    NEAREST_MIPMAP_NEAREST = 0x2700,\r\n    LINEAR_MIPMAP_NEAREST = 0x2701,\r\n    NEAREST_MIPMAP_LINEAR = 0x2702,\r\n    LINEAR_MIPMAP_LINEAR = 0x2703,\r\n    TEXTURE_MAG_FILTER = 0x2800,\r\n    TEXTURE_MIN_FILTER = 0x2801,\r\n    TEXTURE_WRAP_S = 0x2802,\r\n    TEXTURE_WRAP_T = 0x2803,\r\n    TEXTURE_2D = 0x0de1,\r\n    TEXTURE = 0x1702,\r\n    TEXTURE_CUBE_MAP = 0x8513,\r\n    TEXTURE_BINDING_CUBE_MAP = 0x8514,\r\n    TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_X = 0x8516,\r\n    TEXTURE_CUBE_MAP_POSITIVE_Y = 0x8517,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_Y = 0x8518,\r\n    TEXTURE_CUBE_MAP_POSITIVE_Z = 0x8519,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_Z = 0x851a,\r\n    MAX_CUBE_MAP_TEXTURE_SIZE = 0x851c,\r\n    TEXTURE0 = 0x84c0,\r\n    TEXTURE1 = 0x84c1,\r\n    TEXTURE2 = 0x84c2,\r\n    TEXTURE3 = 0x84c3,\r\n    TEXTURE4 = 0x84c4,\r\n    TEXTURE5 = 0x84c5,\r\n    TEXTURE6 = 0x84c6,\r\n    TEXTURE7 = 0x84c7,\r\n    TEXTURE8 = 0x84c8,\r\n    TEXTURE9 = 0x84c9,\r\n    TEXTURE10 = 0x84ca,\r\n    TEXTURE11 = 0x84cb,\r\n    TEXTURE12 = 0x84cc,\r\n    TEXTURE13 = 0x84cd,\r\n    TEXTURE14 = 0x84ce,\r\n    TEXTURE15 = 0x84cf,\r\n    TEXTURE16 = 0x84d0,\r\n    TEXTURE17 = 0x84d1,\r\n    TEXTURE18 = 0x84d2,\r\n    TEXTURE19 = 0x84d3,\r\n    TEXTURE20 = 0x84d4,\r\n    TEXTURE21 = 0x84d5,\r\n    TEXTURE22 = 0x84d6,\r\n    TEXTURE23 = 0x84d7,\r\n    TEXTURE24 = 0x84d8,\r\n    TEXTURE25 = 0x84d9,\r\n    TEXTURE26 = 0x84da,\r\n    TEXTURE27 = 0x84db,\r\n    TEXTURE28 = 0x84dc,\r\n    TEXTURE29 = 0x84dd,\r\n    TEXTURE30 = 0x84de,\r\n    TEXTURE31 = 0x84df,\r\n    ACTIVE_TEXTURE = 0x84e0,\r\n    REPEAT = 0x2901,\r\n    CLAMP_TO_EDGE = 0x812f,\r\n    MIRRORED_REPEAT = 0x8370,\r\n    FLOAT_VEC2 = 0x8b50,\r\n    FLOAT_VEC3 = 0x8b51,\r\n    FLOAT_VEC4 = 0x8b52,\r\n    INT_VEC2 = 0x8b53,\r\n    INT_VEC3 = 0x8b54,\r\n    INT_VEC4 = 0x8b55,\r\n    BOOL = 0x8b56,\r\n    BOOL_VEC2 = 0x8b57,\r\n    BOOL_VEC3 = 0x8b58,\r\n    BOOL_VEC4 = 0x8b59,\r\n    FLOAT_MAT2 = 0x8b5a,\r\n    FLOAT_MAT3 = 0x8b5b,\r\n    FLOAT_MAT4 = 0x8b5c,\r\n    SAMPLER_2D = 0x8b5e,\r\n    SAMPLER_CUBE = 0x8b60,\r\n    VERTEX_ATTRIB_ARRAY_ENABLED = 0x8622,\r\n    VERTEX_ATTRIB_ARRAY_SIZE = 0x8623,\r\n    VERTEX_ATTRIB_ARRAY_STRIDE = 0x8624,\r\n    VERTEX_ATTRIB_ARRAY_TYPE = 0x8625,\r\n    VERTEX_ATTRIB_ARRAY_NORMALIZED = 0x886a,\r\n    VERTEX_ATTRIB_ARRAY_POINTER = 0x8645,\r\n    VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889f,\r\n    IMPLEMENTATION_COLOR_READ_TYPE = 0x8b9a,\r\n    IMPLEMENTATION_COLOR_READ_FORMAT = 0x8b9b,\r\n    COMPILE_STATUS = 0x8b81,\r\n    LOW_FLOAT = 0x8df0,\r\n    MEDIUM_FLOAT = 0x8df1,\r\n    HIGH_FLOAT = 0x8df2,\r\n    LOW_INT = 0x8df3,\r\n    MEDIUM_INT = 0x8df4,\r\n    HIGH_INT = 0x8df5,\r\n    FRAMEBUFFER = 0x8d40,\r\n    RENDERBUFFER = 0x8d41,\r\n    RGBA4 = 0x8056,\r\n    RGB5_A1 = 0x8057,\r\n    RGB565 = 0x8d62,\r\n    DEPTH_COMPONENT16 = 0x81a5,\r\n    STENCIL_INDEX = 0x1901,\r\n    STENCIL_INDEX8 = 0x8d48,\r\n    DEPTH_STENCIL = 0x84f9,\r\n    RENDERBUFFER_WIDTH = 0x8d42,\r\n    RENDERBUFFER_HEIGHT = 0x8d43,\r\n    RENDERBUFFER_INTERNAL_FORMAT = 0x8d44,\r\n    RENDERBUFFER_RED_SIZE = 0x8d50,\r\n    RENDERBUFFER_GREEN_SIZE = 0x8d51,\r\n    RENDERBUFFER_BLUE_SIZE = 0x8d52,\r\n    RENDERBUFFER_ALPHA_SIZE = 0x8d53,\r\n    RENDERBUFFER_DEPTH_SIZE = 0x8d54,\r\n    RENDERBUFFER_STENCIL_SIZE = 0x8d55,\r\n    FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 0x8cd0,\r\n    FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 0x8cd1,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 0x8cd2,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8cd3,\r\n    COLOR_ATTACHMENT0 = 0x8ce0,\r\n    DEPTH_ATTACHMENT = 0x8d00,\r\n    STENCIL_ATTACHMENT = 0x8d20,\r\n    DEPTH_STENCIL_ATTACHMENT = 0x821a,\r\n    NONE = 0,\r\n    FRAMEBUFFER_COMPLETE = 0x8cd5,\r\n    FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8cd6,\r\n    FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8cd7,\r\n    FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8cd9,\r\n    FRAMEBUFFER_UNSUPPORTED = 0x8cdd,\r\n    FRAMEBUFFER_BINDING = 0x8ca6,\r\n    RENDERBUFFER_BINDING = 0x8ca7,\r\n    MAX_RENDERBUFFER_SIZE = 0x84e8,\r\n    INVALID_FRAMEBUFFER_OPERATION = 0x0506,\r\n    UNPACK_FLIP_Y_WEBGL = 0x9240,\r\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241,\r\n    CONTEXT_LOST_WEBGL = 0x9242,\r\n    UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243,\r\n    BROWSER_DEFAULT_WEBGL = 0x9244,\r\n\r\n    // WEBGL_compressed_texture_s3tc\r\n    COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83f0,\r\n    COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83f1,\r\n    COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83f2,\r\n    COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83f3,\r\n\r\n    // WEBGL_compressed_texture_pvrtc\r\n    COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8c00,\r\n    COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8c01,\r\n    COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8c02,\r\n    COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8c03,\r\n\r\n    // WEBGL_compressed_texture_etc1\r\n    COMPRESSED_RGB_ETC1_WEBGL = 0x8d64,\r\n\r\n    // Desktop OpenGL\r\n    DOUBLE = 0x140a,\r\n\r\n    // WebGL 2\r\n    READ_BUFFER = 0x0c02,\r\n    UNPACK_ROW_LENGTH = 0x0cf2,\r\n    UNPACK_SKIP_ROWS = 0x0cf3,\r\n    UNPACK_SKIP_PIXELS = 0x0cf4,\r\n    PACK_ROW_LENGTH = 0x0d02,\r\n    PACK_SKIP_ROWS = 0x0d03,\r\n    PACK_SKIP_PIXELS = 0x0d04,\r\n    COLOR = 0x1800,\r\n    DEPTH = 0x1801,\r\n    STENCIL = 0x1802,\r\n    RED = 0x1903,\r\n    RGB8 = 0x8051,\r\n    RGBA8 = 0x8058,\r\n    RGB10_A2 = 0x8059,\r\n    TEXTURE_BINDING_3D = 0x806a,\r\n    UNPACK_SKIP_IMAGES = 0x806d,\r\n    UNPACK_IMAGE_HEIGHT = 0x806e,\r\n    TEXTURE_3D = 0x806f,\r\n    TEXTURE_WRAP_R = 0x8072,\r\n    MAX_3D_TEXTURE_SIZE = 0x8073,\r\n    UNSIGNED_INT_2_10_10_10_REV = 0x8368,\r\n    MAX_ELEMENTS_VERTICES = 0x80e8,\r\n    MAX_ELEMENTS_INDICES = 0x80e9,\r\n    TEXTURE_MIN_LOD = 0x813a,\r\n    TEXTURE_MAX_LOD = 0x813b,\r\n    TEXTURE_BASE_LEVEL = 0x813c,\r\n    TEXTURE_MAX_LEVEL = 0x813d,\r\n    MIN = 0x8007,\r\n    MAX = 0x8008,\r\n    DEPTH_COMPONENT24 = 0x81a6,\r\n    MAX_TEXTURE_LOD_BIAS = 0x84fd,\r\n    TEXTURE_COMPARE_MODE = 0x884c,\r\n    TEXTURE_COMPARE_FUNC = 0x884d,\r\n    CURRENT_QUERY = 0x8865,\r\n    QUERY_RESULT = 0x8866,\r\n    QUERY_RESULT_AVAILABLE = 0x8867,\r\n    STREAM_READ = 0x88e1,\r\n    STREAM_COPY = 0x88e2,\r\n    STATIC_READ = 0x88e5,\r\n    STATIC_COPY = 0x88e6,\r\n    DYNAMIC_READ = 0x88e9,\r\n    DYNAMIC_COPY = 0x88ea,\r\n    MAX_DRAW_BUFFERS = 0x8824,\r\n    DRAW_BUFFER0 = 0x8825,\r\n    DRAW_BUFFER1 = 0x8826,\r\n    DRAW_BUFFER2 = 0x8827,\r\n    DRAW_BUFFER3 = 0x8828,\r\n    DRAW_BUFFER4 = 0x8829,\r\n    DRAW_BUFFER5 = 0x882a,\r\n    DRAW_BUFFER6 = 0x882b,\r\n    DRAW_BUFFER7 = 0x882c,\r\n    DRAW_BUFFER8 = 0x882d,\r\n    DRAW_BUFFER9 = 0x882e,\r\n    DRAW_BUFFER10 = 0x882f,\r\n    DRAW_BUFFER11 = 0x8830,\r\n    DRAW_BUFFER12 = 0x8831,\r\n    DRAW_BUFFER13 = 0x8832,\r\n    DRAW_BUFFER14 = 0x8833,\r\n    DRAW_BUFFER15 = 0x8834,\r\n    MAX_FRAGMENT_UNIFORM_COMPONENTS = 0x8b49,\r\n    MAX_VERTEX_UNIFORM_COMPONENTS = 0x8b4a,\r\n    SAMPLER_3D = 0x8b5f,\r\n    SAMPLER_2D_SHADOW = 0x8b62,\r\n    FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b,\r\n    PIXEL_PACK_BUFFER = 0x88eb,\r\n    PIXEL_UNPACK_BUFFER = 0x88ec,\r\n    PIXEL_PACK_BUFFER_BINDING = 0x88ed,\r\n    PIXEL_UNPACK_BUFFER_BINDING = 0x88ef,\r\n    FLOAT_MAT2X3 = 0x8b65,\r\n    FLOAT_MAT2X4 = 0x8b66,\r\n    FLOAT_MAT3X2 = 0x8b67,\r\n    FLOAT_MAT3X4 = 0x8b68,\r\n    FLOAT_MAT4X2 = 0x8b69,\r\n    FLOAT_MAT4X3 = 0x8b6a,\r\n    SRGB = 0x8c40,\r\n    SRGB8 = 0x8c41,\r\n    SRGB8_ALPHA8 = 0x8c43,\r\n    COMPARE_REF_TO_TEXTURE = 0x884e,\r\n    RGBA32F = 0x8814,\r\n    RGB32F = 0x8815,\r\n    RGBA16F = 0x881a,\r\n    RGB16F = 0x881b,\r\n    VERTEX_ATTRIB_ARRAY_INTEGER = 0x88fd,\r\n    MAX_ARRAY_TEXTURE_LAYERS = 0x88ff,\r\n    MIN_PROGRAM_TEXEL_OFFSET = 0x8904,\r\n    MAX_PROGRAM_TEXEL_OFFSET = 0x8905,\r\n    MAX_VARYING_COMPONENTS = 0x8b4b,\r\n    TEXTURE_2D_ARRAY = 0x8c1a,\r\n    TEXTURE_BINDING_2D_ARRAY = 0x8c1d,\r\n    R11F_G11F_B10F = 0x8c3a,\r\n    UNSIGNED_INT_10F_11F_11F_REV = 0x8c3b,\r\n    RGB9_E5 = 0x8c3d,\r\n    UNSIGNED_INT_5_9_9_9_REV = 0x8c3e,\r\n    TRANSFORM_FEEDBACK_BUFFER_MODE = 0x8c7f,\r\n    MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 0x8c80,\r\n    TRANSFORM_FEEDBACK_VARYINGS = 0x8c83,\r\n    TRANSFORM_FEEDBACK_BUFFER_START = 0x8c84,\r\n    TRANSFORM_FEEDBACK_BUFFER_SIZE = 0x8c85,\r\n    TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88,\r\n    RASTERIZER_DISCARD = 0x8c89,\r\n    MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 0x8c8a,\r\n    MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 0x8c8b,\r\n    INTERLEAVED_ATTRIBS = 0x8c8c,\r\n    SEPARATE_ATTRIBS = 0x8c8d,\r\n    TRANSFORM_FEEDBACK_BUFFER = 0x8c8e,\r\n    TRANSFORM_FEEDBACK_BUFFER_BINDING = 0x8c8f,\r\n    RGBA32UI = 0x8d70,\r\n    RGB32UI = 0x8d71,\r\n    RGBA16UI = 0x8d76,\r\n    RGB16UI = 0x8d77,\r\n    RGBA8UI = 0x8d7c,\r\n    RGB8UI = 0x8d7d,\r\n    RGBA32I = 0x8d82,\r\n    RGB32I = 0x8d83,\r\n    RGBA16I = 0x8d88,\r\n    RGB16I = 0x8d89,\r\n    RGBA8I = 0x8d8e,\r\n    RGB8I = 0x8d8f,\r\n    RED_INTEGER = 0x8d94,\r\n    RGB_INTEGER = 0x8d98,\r\n    RGBA_INTEGER = 0x8d99,\r\n    SAMPLER_2D_ARRAY = 0x8dc1,\r\n    SAMPLER_2D_ARRAY_SHADOW = 0x8dc4,\r\n    SAMPLER_CUBE_SHADOW = 0x8dc5,\r\n    UNSIGNED_INT_VEC2 = 0x8dc6,\r\n    UNSIGNED_INT_VEC3 = 0x8dc7,\r\n    UNSIGNED_INT_VEC4 = 0x8dc8,\r\n    INT_SAMPLER_2D = 0x8dca,\r\n    INT_SAMPLER_3D = 0x8dcb,\r\n    INT_SAMPLER_CUBE = 0x8dcc,\r\n    INT_SAMPLER_2D_ARRAY = 0x8dcf,\r\n    UNSIGNED_INT_SAMPLER_2D = 0x8dd2,\r\n    UNSIGNED_INT_SAMPLER_3D = 0x8dd3,\r\n    UNSIGNED_INT_SAMPLER_CUBE = 0x8dd4,\r\n    UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8dd7,\r\n    DEPTH_COMPONENT32F = 0x8cac,\r\n    DEPTH32F_STENCIL8 = 0x8cad,\r\n    FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8dad,\r\n    FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 0x8210,\r\n    FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 0x8211,\r\n    FRAMEBUFFER_ATTACHMENT_RED_SIZE = 0x8212,\r\n    FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 0x8213,\r\n    FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 0x8214,\r\n    FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 0x8215,\r\n    FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 0x8216,\r\n    FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 0x8217,\r\n    FRAMEBUFFER_DEFAULT = 0x8218,\r\n    UNSIGNED_INT_24_8 = 0x84fa,\r\n    DEPTH24_STENCIL8 = 0x88f0,\r\n    UNSIGNED_NORMALIZED = 0x8c17,\r\n    DRAW_FRAMEBUFFER_BINDING = 0x8ca6, // Same as FRAMEBUFFER_BINDING\r\n    READ_FRAMEBUFFER = 0x8ca8,\r\n    DRAW_FRAMEBUFFER = 0x8ca9,\r\n    READ_FRAMEBUFFER_BINDING = 0x8caa,\r\n    RENDERBUFFER_SAMPLES = 0x8cab,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 0x8cd4,\r\n    MAX_COLOR_ATTACHMENTS = 0x8cdf,\r\n    COLOR_ATTACHMENT1 = 0x8ce1,\r\n    COLOR_ATTACHMENT2 = 0x8ce2,\r\n    COLOR_ATTACHMENT3 = 0x8ce3,\r\n    COLOR_ATTACHMENT4 = 0x8ce4,\r\n    COLOR_ATTACHMENT5 = 0x8ce5,\r\n    COLOR_ATTACHMENT6 = 0x8ce6,\r\n    COLOR_ATTACHMENT7 = 0x8ce7,\r\n    COLOR_ATTACHMENT8 = 0x8ce8,\r\n    COLOR_ATTACHMENT9 = 0x8ce9,\r\n    COLOR_ATTACHMENT10 = 0x8cea,\r\n    COLOR_ATTACHMENT11 = 0x8ceb,\r\n    COLOR_ATTACHMENT12 = 0x8cec,\r\n    COLOR_ATTACHMENT13 = 0x8ced,\r\n    COLOR_ATTACHMENT14 = 0x8cee,\r\n    COLOR_ATTACHMENT15 = 0x8cef,\r\n    FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 0x8d56,\r\n    MAX_SAMPLES = 0x8d57,\r\n    HALF_FLOAT = 0x140b,\r\n    HALF_FLOAT_OES = 0x8d61,\r\n    RG = 0x8227,\r\n    RG_INTEGER = 0x8228,\r\n    R8 = 0x8229,\r\n    RG8 = 0x822b,\r\n    R16F = 0x822d,\r\n    R32F = 0x822e,\r\n    RG16F = 0x822f,\r\n    RG32F = 0x8230,\r\n    R8I = 0x8231,\r\n    R8UI = 0x8232,\r\n    R16I = 0x8233,\r\n    R16UI = 0x8234,\r\n    R32I = 0x8235,\r\n    R32UI = 0x8236,\r\n    RG8I = 0x8237,\r\n    RG8UI = 0x8238,\r\n    RG16I = 0x8239,\r\n    RG16UI = 0x823a,\r\n    RG32I = 0x823b,\r\n    RG32UI = 0x823c,\r\n    VERTEX_ARRAY_BINDING = 0x85b5,\r\n    R8_SNORM = 0x8f94,\r\n    RG8_SNORM = 0x8f95,\r\n    RGB8_SNORM = 0x8f96,\r\n    RGBA8_SNORM = 0x8f97,\r\n    SIGNED_NORMALIZED = 0x8f9c,\r\n    COPY_READ_BUFFER = 0x8f36,\r\n    COPY_WRITE_BUFFER = 0x8f37,\r\n    COPY_READ_BUFFER_BINDING = 0x8f36, // Same as COPY_READ_BUFFER\r\n    COPY_WRITE_BUFFER_BINDING = 0x8f37, // Same as COPY_WRITE_BUFFER\r\n    UNIFORM_BUFFER = 0x8a11,\r\n    UNIFORM_BUFFER_BINDING = 0x8a28,\r\n    UNIFORM_BUFFER_START = 0x8a29,\r\n    UNIFORM_BUFFER_SIZE = 0x8a2a,\r\n    MAX_VERTEX_UNIFORM_BLOCKS = 0x8a2b,\r\n    MAX_FRAGMENT_UNIFORM_BLOCKS = 0x8a2d,\r\n    MAX_COMBINED_UNIFORM_BLOCKS = 0x8a2e,\r\n    MAX_UNIFORM_BUFFER_BINDINGS = 0x8a2f,\r\n    MAX_UNIFORM_BLOCK_SIZE = 0x8a30,\r\n    MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 0x8a31,\r\n    MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 0x8a33,\r\n    UNIFORM_BUFFER_OFFSET_ALIGNMENT = 0x8a34,\r\n    ACTIVE_UNIFORM_BLOCKS = 0x8a36,\r\n    UNIFORM_TYPE = 0x8a37,\r\n    UNIFORM_SIZE = 0x8a38,\r\n    UNIFORM_BLOCK_INDEX = 0x8a3a,\r\n    UNIFORM_OFFSET = 0x8a3b,\r\n    UNIFORM_ARRAY_STRIDE = 0x8a3c,\r\n    UNIFORM_MATRIX_STRIDE = 0x8a3d,\r\n    UNIFORM_IS_ROW_MAJOR = 0x8a3e,\r\n    UNIFORM_BLOCK_BINDING = 0x8a3f,\r\n    UNIFORM_BLOCK_DATA_SIZE = 0x8a40,\r\n    UNIFORM_BLOCK_ACTIVE_UNIFORMS = 0x8a42,\r\n    UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 0x8a43,\r\n    UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 0x8a44,\r\n    UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46,\r\n    INVALID_INDEX = 0xffffffff,\r\n    MAX_VERTEX_OUTPUT_COMPONENTS = 0x9122,\r\n    MAX_FRAGMENT_INPUT_COMPONENTS = 0x9125,\r\n    MAX_SERVER_WAIT_TIMEOUT = 0x9111,\r\n    OBJECT_TYPE = 0x9112,\r\n    SYNC_CONDITION = 0x9113,\r\n    SYNC_STATUS = 0x9114,\r\n    SYNC_FLAGS = 0x9115,\r\n    SYNC_FENCE = 0x9116,\r\n    SYNC_GPU_COMMANDS_COMPLETE = 0x9117,\r\n    UNSIGNALED = 0x9118,\r\n    SIGNALED = 0x9119,\r\n    ALREADY_SIGNALED = 0x911a,\r\n    TIMEOUT_EXPIRED = 0x911b,\r\n    CONDITION_SATISFIED = 0x911c,\r\n    WAIT_FAILED = 0x911d,\r\n    SYNC_FLUSH_COMMANDS_BIT = 0x00000001,\r\n    VERTEX_ATTRIB_ARRAY_DIVISOR = 0x88fe,\r\n    ANY_SAMPLES_PASSED = 0x8c2f,\r\n    ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a,\r\n    SAMPLER_BINDING = 0x8919,\r\n    RGB10_A2UI = 0x906f,\r\n    INT_2_10_10_10_REV = 0x8d9f,\r\n    TRANSFORM_FEEDBACK = 0x8e22,\r\n    TRANSFORM_FEEDBACK_PAUSED = 0x8e23,\r\n    TRANSFORM_FEEDBACK_ACTIVE = 0x8e24,\r\n    TRANSFORM_FEEDBACK_BINDING = 0x8e25,\r\n    COMPRESSED_R11_EAC = 0x9270,\r\n    COMPRESSED_SIGNED_R11_EAC = 0x9271,\r\n    COMPRESSED_RG11_EAC = 0x9272,\r\n    COMPRESSED_SIGNED_RG11_EAC = 0x9273,\r\n    COMPRESSED_RGB8_ETC2 = 0x9274,\r\n    COMPRESSED_SRGB8_ETC2 = 0x9275,\r\n    COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9276,\r\n    COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9277,\r\n    COMPRESSED_RGBA8_ETC2_EAC = 0x9278,\r\n    COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9279,\r\n    TEXTURE_IMMUTABLE_FORMAT = 0x912f,\r\n    MAX_ELEMENT_INDEX = 0x8d6b,\r\n    TEXTURE_IMMUTABLE_LEVELS = 0x82df,\r\n\r\n    // Extensions\r\n    MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff,\r\n}\r\n","import { GlConstants } from \"./GLConstant\";\r\nimport { TypedArray } from \"./type\";\r\n\r\n/**\r\n * Get the GL type for a typedArray\r\n */\r\nexport function getGLTypeForTypedArray(typedArray: ArrayBufferView): number {\r\n    if (typedArray instanceof Int8Array) {\r\n        return GlConstants.BYTE;\r\n    }\r\n    if (typedArray instanceof Uint8Array) {\r\n        return GlConstants.UNSIGNED_BYTE;\r\n    }\r\n    if (typedArray instanceof Uint8ClampedArray) {\r\n        return GlConstants.UNSIGNED_BYTE;\r\n    }\r\n    if (typedArray instanceof Int16Array) {\r\n        return GlConstants.SHORT;\r\n    }\r\n    if (typedArray instanceof Uint16Array) {\r\n        return GlConstants.UNSIGNED_SHORT;\r\n    }\r\n    if (typedArray instanceof Int32Array) {\r\n        return GlConstants.INT;\r\n    }\r\n    if (typedArray instanceof Uint32Array) {\r\n        return GlConstants.UNSIGNED_INT;\r\n    }\r\n    if (typedArray instanceof Float32Array) {\r\n        return GlConstants.FLOAT;\r\n    }\r\n    throw \"unsupported typed array to gl type\";\r\n}\r\n\r\nexport function getArrayTypeForGLtype(glType: number) {\r\n    if (glType == GlConstants.BYTE) {\r\n        return Int8Array;\r\n    }\r\n    if (glType == GlConstants.UNSIGNED_BYTE) {\r\n        return Uint8Array;\r\n    }\r\n    if (glType == GlConstants.UNSIGNED_BYTE) {\r\n        return Uint8ClampedArray;\r\n    }\r\n    if (glType == GlConstants.SHORT) {\r\n        return Int16Array;\r\n    }\r\n    if (glType == GlConstants.UNSIGNED_SHORT) {\r\n        return Uint16Array;\r\n    }\r\n    if (glType == GlConstants.INT) {\r\n        return Int32Array;\r\n    }\r\n    if (glType == GlConstants.UNSIGNED_INT) {\r\n        return Uint32Array;\r\n    }\r\n    if (glType == GlConstants.FLOAT) {\r\n        return Float32Array;\r\n    }\r\n    throw \"unsupported gltype to array type\";\r\n}\r\n\r\nexport function getbytesForGLtype(glType: number) {\r\n    switch (glType) {\r\n        case GlConstants.BYTE:\r\n            return 1;\r\n        case GlConstants.UNSIGNED_BYTE:\r\n            return 1;\r\n\r\n        case GlConstants.SHORT:\r\n            return 2;\r\n        case GlConstants.UNSIGNED_SHORT_4_4_4_4:\r\n            return 2;\r\n        case GlConstants.UNSIGNED_SHORT:\r\n            return 2;\r\n\r\n        case GlConstants.INT:\r\n            return 4;\r\n        case GlConstants.UNSIGNED_INT:\r\n            return 4;\r\n\r\n        case GlConstants.HALF_FLOAT:\r\n            return 2;\r\n        case GlConstants.HALF_FLOAT_OES:\r\n            return 2;\r\n        case GlConstants.FLOAT:\r\n            return 4;\r\n        default:\r\n            throw \"unsupported gltype to bytesPerElement\";\r\n    }\r\n}\r\n\r\nexport function getTypedArray(data: number | number[], gltype: number): TypedArray {\r\n    let type = typeof data;\r\n    if (type == \"number\") {\r\n        let type = getArrayTypeForGLtype(gltype);\r\n        return new type(data as number);\r\n    } else if (data instanceof Array) {\r\n        let type = getArrayTypeForGLtype(gltype);\r\n        return new type(data);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function float4Equal(lhs: Float32Array, rhs: Float32Array): boolean {\r\n    return lhs[0] == rhs[0] || lhs[1] == rhs[1] || lhs[2] == rhs[2];\r\n}\r\n","import { IvertexIndex, TypedArray, TArrayInfo } from \"./type\";\r\nimport { GlConstants } from \"./GLConstant\";\r\nimport { getGLTypeForTypedArray, getArrayTypeForGLtype } from \"./Helper\";\r\n\r\nexport class VertexIndex implements IvertexIndex {\r\n    name: string;\r\n    viewBuffer?: ArrayBufferView;\r\n    count?: number;\r\n\r\n    componentDataType: number;\r\n\r\n    glBuffer: WebGLBuffer;\r\n    drawType: number;\r\n\r\n    static fromTarrayInfo(data: TArrayInfo): VertexIndex {\r\n        let newData = new VertexIndex();\r\n        newData.name = \"indices\";\r\n        if (data instanceof Array) {\r\n            newData.viewBuffer = new Uint16Array(data);\r\n        } else if (ArrayBuffer.isView(data)) {\r\n            newData.viewBuffer = data;\r\n        } else {\r\n            let arraydata = data.value;\r\n            if (arraydata instanceof Array) {\r\n                let type = data.componentDataType ? getArrayTypeForGLtype(data.componentDataType) : Uint16Array;\r\n                newData.viewBuffer = new type(arraydata);\r\n            } else {\r\n                newData.viewBuffer = arraydata;\r\n            }\r\n        }\r\n\r\n        let orginData = data as IvertexIndex;\r\n\r\n        if (orginData.componentDataType == null) {\r\n            newData.componentDataType = newData.viewBuffer\r\n                ? getGLTypeForTypedArray(newData.viewBuffer as TypedArray)\r\n                : GlConstants.UNSIGNED_SHORT;\r\n        } else {\r\n            newData.componentDataType = orginData.componentDataType;\r\n        }\r\n        if (orginData.count == null) {\r\n            newData.count = newData.viewBuffer ? (newData.viewBuffer as TypedArray).length : null;\r\n        } else {\r\n            newData.count = orginData.count;\r\n        }\r\n        newData.drawType = orginData.drawType ? newData.drawType : GlConstants.STATIC_DRAW;\r\n\r\n        if (newData.count == null) {\r\n            throw new Error(\"can not deduce geometry Indices count.\");\r\n        }\r\n\r\n        // vertexData.count = newData.indexCount ? newData.indexCount : vertexData.length;\r\n        return newData;\r\n    }\r\n}\r\n\r\nexport function createIndexBufferInfo(gl: WebGLRenderingContext, data: TArrayInfo): IvertexIndex {\r\n    let vertexdata = VertexIndex.fromTarrayInfo(data);\r\n    if (vertexdata.glBuffer == null) {\r\n        let buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, vertexdata.viewBuffer, vertexdata.drawType);\r\n        vertexdata.glBuffer = buffer;\r\n    }\r\n    return vertexdata;\r\n}\r\n\r\nexport function setIndexBuffer(gl: WebGLRenderingContext, indexbuffer: IvertexIndex) {\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexbuffer.glBuffer);\r\n}\r\n","import { IvertexAttrib, TypedArray, TArrayInfo } from \"./type\";\r\nimport { GlConstants } from \"./GLConstant\";\r\nimport { getGLTypeForTypedArray, getArrayTypeForGLtype, getbytesForGLtype } from \"./Helper\";\r\n\r\nexport class VertexAtt implements IvertexAttrib {\r\n    name: string;\r\n    glBuffer: WebGLBuffer;\r\n\r\n    viewBuffer?: ArrayBufferView;\r\n    count?: number;\r\n\r\n    componentSize: number;\r\n    componentDataType: number;\r\n    normalize: boolean;\r\n    bytesOffset: number;\r\n    bytesStride: number;\r\n    divisor?: number;\r\n    drawType: number;\r\n\r\n    static fromTarrayInfo(attName: string, data: TArrayInfo): VertexAtt {\r\n        let newData = new VertexAtt();\r\n        newData.name = attName;\r\n\r\n        if (data instanceof Array) {\r\n            newData.viewBuffer = new Float32Array(data);\r\n        } else if (ArrayBuffer.isView(data)) {\r\n            newData.viewBuffer = data;\r\n        } else {\r\n            let arraydata = data.value;\r\n            if (arraydata instanceof Array) {\r\n                let type = data.componentDataType ? getArrayTypeForGLtype(data.componentDataType) : Float32Array;\r\n                newData.viewBuffer = new type(arraydata);\r\n            } else {\r\n                newData.viewBuffer = arraydata;\r\n            }\r\n        }\r\n\r\n        let orginData = data as IvertexAttrib;\r\n\r\n        if (orginData.componentDataType == null) {\r\n            newData.componentDataType = newData.viewBuffer\r\n                ? getGLTypeForTypedArray(newData.viewBuffer as TypedArray)\r\n                : GlConstants.FLOAT;\r\n        } else {\r\n            newData.componentDataType = orginData.componentDataType;\r\n        }\r\n\r\n        newData.componentSize = orginData.componentSize ? orginData.componentSize : guessNumComponentsFromName(attName);\r\n        newData.normalize = orginData.normalize != null ? orginData.normalize : false;\r\n        newData.bytesOffset = orginData.bytesOffset ? orginData.bytesOffset : 0;\r\n        newData.bytesStride = orginData.bytesStride ? orginData.bytesStride : 0;\r\n        newData.drawType = orginData.drawType ? orginData.drawType : GlConstants.STATIC_DRAW;\r\n        newData.divisor = orginData.divisor;\r\n\r\n        if (orginData.count == null) {\r\n            let elementBytes = getbytesForGLtype(newData.componentDataType) * newData.componentSize;\r\n            newData.count = newData.viewBuffer\r\n                ? (newData.viewBuffer as TypedArray).byteLength / elementBytes\r\n                : undefined;\r\n        } else {\r\n            newData.count = orginData.count;\r\n        }\r\n\r\n        return newData;\r\n    }\r\n}\r\n\r\nexport function createAttributeBufferInfo(gl: WebGLRenderingContext, attName: string, data: TArrayInfo): IvertexAttrib {\r\n    let vertexdata = VertexAtt.fromTarrayInfo(attName, data);\r\n\r\n    if (vertexdata.glBuffer == null) {\r\n        let buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, vertexdata.viewBuffer, vertexdata.drawType);\r\n\r\n        vertexdata.glBuffer = buffer;\r\n    }\r\n    return vertexdata;\r\n}\r\n\r\nexport function setAttributeBuffer(gl: WebGLRenderingContext, value: IvertexAttrib, location: number) {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, value.glBuffer);\r\n    gl.enableVertexAttribArray(location);\r\n    gl.vertexAttribPointer(\r\n        location,\r\n        value.componentSize,\r\n        value.componentDataType,\r\n        value.normalize,\r\n        value.bytesStride,\r\n        value.bytesOffset,\r\n    );\r\n    if (value.divisor !== undefined) {\r\n        gl.vertexAttribDivisor(location, value.divisor);\r\n    }\r\n}\r\n\r\nconst uvRE = /uv/;\r\nconst colorRE = /color/;\r\nfunction guessNumComponentsFromName(name: string, length: number = null): number {\r\n    let numComponents;\r\n    name = name.toLowerCase();\r\n    if (uvRE.test(name)) {\r\n        numComponents = 2;\r\n    } else if (colorRE.test(name)) {\r\n        numComponents = 4;\r\n    } else {\r\n        numComponents = 3; // position, normals, indices ...\r\n    }\r\n    // if (length % numComponents > 0)\r\n    // {\r\n    //     throw \"Can not guess numComponents for attribute '\" + name + \"'. Tried \" +\r\n    //     numComponents + \" but \" + length +\r\n    //     \" values is not evenly divisible by \" + numComponents +\r\n    //     \". You should specify it.\";\r\n    // }\r\n    return numComponents;\r\n}\r\n","import { IvertexAttrib, IvertexIndex, IgeometryInfo, IgeometryOptions, IprogramInfo } from \"./type\";\r\nimport { createIndexBufferInfo } from \"./vertexIndex\";\r\nimport { createAttributeBufferInfo } from \"./vertexAttribute\";\r\n\r\nexport class GeometryInfo implements IgeometryInfo {\r\n    vaoDic: { [programeId: number]: WebGLVertexArrayObject } = {};\r\n    constructor() {\r\n        this.id = GeometryInfo.nextID();\r\n    }\r\n    readonly id: number;\r\n    primitiveType: number;\r\n    atts: { [attName: string]: IvertexAttrib } = {};\r\n    indices?: IvertexIndex;\r\n    // mode: number;\r\n    count: number;\r\n    offset: number;\r\n\r\n    private static count = 0;\r\n    static nextID() {\r\n        return GeometryInfo.count++;\r\n    }\r\n}\r\n\r\nexport function createGeometryInfo(gl: WebGLRenderingContext, op: IgeometryOptions): IgeometryInfo {\r\n    let info = new GeometryInfo();\r\n    info.primitiveType = op.primitiveType ? op.primitiveType : gl.TRIANGLES;\r\n    if (op.indices != null) {\r\n        info.indices = createIndexBufferInfo(gl, op.indices);\r\n        if (info.count == null) {\r\n            info.count = info.indices.count;\r\n        }\r\n    }\r\n\r\n    for (let attName in op.atts) {\r\n        info.atts[attName] = createAttributeBufferInfo(gl, attName, op.atts[attName]);\r\n        if (info.count == null) {\r\n            info.count = info.atts[attName].count;\r\n        }\r\n    }\r\n    return info;\r\n}\r\n/**\r\n *  tips : setProgrameWithcached need behind (setGeometryWithAdvanced/setGeometryWithCached)，when draw obj\r\n * @param gl\r\n * @param geometry\r\n * @param program\r\n */\r\nexport function setGeometryWithAdvanced(gl: WebGLRenderingContext, geometry: IgeometryInfo, program: IprogramInfo) {\r\n    let bechanged = gl._cachedGeometry != geometry || gl._cachedProgram != program.bassProgram.program;\r\n    if (bechanged) {\r\n        if (geometry.vaoDic[program.bassProgram.id]) {\r\n            gl.bindVertexArray(geometry.vaoDic[program.bassProgram.id]);\r\n        } else {\r\n            if (gl.beActiveVao) {\r\n                let vao = createVaoByPrograme(gl, program, geometry);\r\n                gl.bindVertexArray(vao);\r\n                geometry.vaoDic[program.bassProgram.id] = vao;\r\n            } else {\r\n                setGeometry(gl, geometry, program);\r\n            }\r\n        }\r\n        gl._cachedGeometry = geometry;\r\n    }\r\n}\r\n\r\nexport function setGeometry(gl: WebGLRenderingContext, geometry: IgeometryInfo, program: IprogramInfo) {\r\n    for (let attName in program.bassProgram.attsDic) {\r\n        program.bassProgram.attsDic[attName].setter(geometry.atts[attName]);\r\n    }\r\n    if (geometry.indices) {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, geometry.indices.glBuffer);\r\n    }\r\n}\r\n/**\r\n * tips : setProgrameWithcached need behind (setGeometryWithAdvanced/setGeometryWithCached)，when draw obj\r\n * @param gl\r\n * @param geometry\r\n * @param program\r\n */\r\nexport function setGeometryWithCached(gl: WebGLRenderingContext, geometry: IgeometryInfo, program: IprogramInfo) {\r\n    if (gl._cachedGeometry != geometry || gl._cachedProgram != program.bassProgram.program) {\r\n        setGeometry(gl, geometry, program);\r\n        gl._cachedGeometry = geometry;\r\n    }\r\n}\r\n\r\n//------------program和vao是一一对应的，geometry可以有多个vao\r\n/**\r\n * 创建vao将geometry和program绑定\r\n */\r\nexport function createVaoByPrograme(\r\n    gl: WebGLRenderingContext,\r\n    program: IprogramInfo,\r\n    geometry: IgeometryInfo,\r\n): WebGLVertexArrayObject {\r\n    let vao = gl.createVertexArray();\r\n    gl.bindVertexArray(vao);\r\n    setGeometry(gl, geometry, program);\r\n    gl.bindVertexArray(null);\r\n    return vao;\r\n}\r\n","import { IprogramState, IgeometryInfo } from \"./type\";\r\n\r\nimport { GlConstants } from \"./GLConstant\";\r\n\r\ndeclare global {\r\n    interface WebGLRenderingContext {\r\n        _cachedGeometry: IgeometryInfo;\r\n        _cachedProgram: WebGLProgram;\r\n        _cachedEnableCullFace: boolean;\r\n        _cachedCullFace: boolean;\r\n        _cachedDepthWrite: boolean;\r\n        _cachedDepthTest: boolean;\r\n        _cachedEnableBlend: boolean;\r\n        _cachedBlendEquation: number;\r\n        _cachedBlendFuncSrc: number;\r\n        _cachedBlendFuncDst: number;\r\n        _cachedEnableStencilTest: boolean;\r\n        _cachedStencilFunc: number;\r\n        _cachedStencilRefValue: number;\r\n        _cachedStencilMask: number;\r\n        _cachedStencilFail: number;\r\n        _cachedStencilPassZfail: number;\r\n        _cachedStencilFaileZpass: number;\r\n\r\n        _cachedViewPortX: number;\r\n        _cachedViewPortY: number;\r\n        _cachedViewPortWidth: number;\r\n        _cachedViewPortHeight: number;\r\n\r\n        _cacheColorMaskR: boolean;\r\n        _cacheColorMaskG: boolean;\r\n        _cacheColorMaskB: boolean;\r\n        _cacheColorMaskA: boolean;\r\n    }\r\n}\r\nexport function setClear(\r\n    gl: WebGLRenderingContext,\r\n    clearDepth: boolean,\r\n    clearColor: Float32Array | null,\r\n    clearStencil: boolean = false,\r\n) {\r\n    let cleartag = 0;\r\n    if (clearDepth) {\r\n        gl.clearDepth(1.0);\r\n        cleartag |= gl.DEPTH_BUFFER_BIT;\r\n    }\r\n    if (clearColor) {\r\n        gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\r\n        cleartag |= gl.COLOR_BUFFER_BIT;\r\n    }\r\n    if (clearStencil) {\r\n        gl.clearStencil(0);\r\n        cleartag |= gl.STENCIL_BUFFER_BIT;\r\n    }\r\n    gl.clear(cleartag);\r\n}\r\n\r\nexport function setViewPortWithCached(gl: WebGLRenderingContext, x: number, y: number, width: number, height: number) {\r\n    let bechanged =\r\n        gl._cachedViewPortX != x ||\r\n        gl._cachedViewPortY != y ||\r\n        gl._cachedViewPortWidth != width ||\r\n        gl._cachedViewPortHeight != height;\r\n    if (!bechanged) {\r\n        gl.viewport(x, y, width, height);\r\n        gl._cachedViewPortX = x;\r\n        gl._cachedViewPortY = y;\r\n        gl._cachedViewPortWidth = width;\r\n        gl._cachedViewPortHeight = height;\r\n    }\r\n}\r\n\r\nexport function setColorMaskWithCached(\r\n    gl: WebGLRenderingContext,\r\n    maskR: boolean,\r\n    maskG: boolean,\r\n    maskB: boolean,\r\n    maskA: boolean,\r\n) {\r\n    if (\r\n        gl._cacheColorMaskR != maskR ||\r\n        gl._cacheColorMaskG != maskG ||\r\n        gl._cacheColorMaskB != maskB ||\r\n        gl._cacheColorMaskA != maskA\r\n    ) {\r\n        gl.colorMask(maskR, maskG, maskB, maskA);\r\n        gl._cacheColorMaskR = maskR;\r\n        gl._cacheColorMaskG = maskG;\r\n        gl._cacheColorMaskB = maskB;\r\n        gl._cacheColorMaskA = maskA;\r\n    }\r\n}\r\n\r\nexport function setCullFaceStateWithCached(gl: WebGLRenderingContext, enableCullFace: boolean, cullBack: boolean) {\r\n    if (gl._cachedEnableCullFace != enableCullFace) {\r\n        gl._cachedEnableCullFace = enableCullFace;\r\n\r\n        if (enableCullFace) {\r\n            gl.enable(gl.CULL_FACE);\r\n\r\n            if (gl._cachedCullFace != cullBack) {\r\n                gl._cachedCullFace = cullBack;\r\n\r\n                gl.cullFace(cullBack ? gl.BACK : gl.FRONT);\r\n            }\r\n        } else {\r\n            gl.disable(gl.CULL_FACE);\r\n        }\r\n    } else {\r\n        if (gl._cachedCullFace != cullBack) {\r\n            gl._cachedCullFace = cullBack;\r\n\r\n            gl.cullFace(cullBack ? gl.BACK : gl.FRONT);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setDepthStateWithCached(\r\n    gl: WebGLRenderingContext,\r\n    depthWrite: boolean = true,\r\n    depthTest: boolean = true,\r\n) {\r\n    if (gl._cachedDepthWrite != depthWrite) {\r\n        gl._cachedDepthWrite = depthWrite;\r\n        gl.depthMask(depthWrite);\r\n    }\r\n    if (gl._cachedDepthTest != depthTest) {\r\n        gl._cachedDepthTest = depthTest;\r\n        if (depthTest) {\r\n            gl.enable(gl.DEPTH_TEST);\r\n        } else {\r\n            gl.disable(gl.DEPTH_TEST);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setBlendStateWithCached(\r\n    gl: WebGLRenderingContext,\r\n    enableBlend: boolean = false,\r\n    blendEquation: number = GlConstants.FUNC_ADD,\r\n    blendSrc: number = GlConstants.ONE,\r\n    blendDst: number = GlConstants.ONE_MINUS_SRC_ALPHA,\r\n) {\r\n    if (gl._cachedEnableBlend != enableBlend) {\r\n        gl._cachedEnableBlend = enableBlend;\r\n        if (enableBlend) {\r\n            gl.enable(gl.BLEND);\r\n\r\n            if (gl._cachedBlendEquation != blendEquation) {\r\n                gl._cachedBlendEquation = blendEquation;\r\n                gl.blendEquation(blendEquation);\r\n            }\r\n            if (gl._cachedBlendFuncSrc != blendSrc || gl._cachedBlendFuncDst != blendDst) {\r\n                gl._cachedBlendFuncSrc = blendSrc;\r\n                gl._cachedBlendFuncDst = blendDst;\r\n                gl.blendFunc(blendSrc, blendDst);\r\n            }\r\n        } else {\r\n            gl.disable(gl.BLEND);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setStencilStateWithCached(\r\n    gl: WebGLRenderingContext,\r\n    enableStencilTest: boolean,\r\n    stencilFunc: number,\r\n    stencilRefValue: number,\r\n    stencilMask: number,\r\n    stencilFail: number,\r\n    stencilPassZfail: number,\r\n    stencilFaileZpass: number,\r\n) {\r\n    if (gl._cachedEnableStencilTest != enableStencilTest) {\r\n        gl._cachedEnableStencilTest = enableStencilTest;\r\n        gl.enable(gl.STENCIL_TEST);\r\n        if (\r\n            gl._cachedStencilFunc != stencilFunc ||\r\n            gl._cachedStencilRefValue != stencilRefValue ||\r\n            gl._cachedStencilMask != stencilMask\r\n        ) {\r\n            gl._cachedStencilFunc = stencilFunc;\r\n            gl._cachedStencilRefValue = stencilRefValue;\r\n            gl._cachedStencilMask = stencilMask;\r\n            gl.stencilFunc(stencilFunc, stencilRefValue, stencilMask);\r\n        }\r\n\r\n        if (\r\n            gl._cachedStencilFail != stencilFail ||\r\n            gl._cachedStencilPassZfail != stencilPassZfail ||\r\n            gl._cachedStencilFaileZpass != stencilFaileZpass\r\n        ) {\r\n            gl._cachedStencilFail = stencilFail;\r\n            gl._cachedStencilPassZfail = stencilPassZfail;\r\n            gl._cachedStencilFaileZpass = stencilFaileZpass;\r\n            gl.stencilOp(stencilFail, stencilPassZfail, stencilFaileZpass);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setProgramStates(gl: WebGLRenderingContext, state: IprogramState) {\r\n    if (state.beDeduce != true) {\r\n        deduceFullShderState(state);\r\n    }\r\n    //---------------------------cullface\r\n    if (state.enableCullFace) {\r\n        gl.enable(gl.CULL_FACE);\r\n        gl.cullFace(state.cullBack ? gl.BACK : gl.FRONT);\r\n    } else {\r\n        gl.disable(gl.CULL_FACE);\r\n    }\r\n\r\n    //----------------depth\r\n    gl.depthMask(state.depthWrite);\r\n    if (state.depthTest) {\r\n        gl.enable(gl.DEPTH_TEST);\r\n    } else {\r\n        gl.disable(gl.DEPTH_TEST);\r\n    }\r\n\r\n    //------------------------blend\r\n    if (state.enableBlend) {\r\n        gl.enable(gl.BLEND);\r\n        gl.blendEquation(state.blendEquation);\r\n        gl.blendFunc(state.blendSrc, state.blendDst);\r\n    }\r\n\r\n    //-------------------------stencil\r\n    if (state.enableStencilTest) {\r\n        gl.enable(gl.STENCIL_TEST);\r\n        gl.stencilFunc(state.stencilFunc, state.stencilRefValue, state.stencilMask);\r\n        gl.stencilOp(state.stencilFail, state.stencilPassZfail, state.stencilFaileZpass);\r\n    }\r\n}\r\n\r\nexport function setProgramStatesWithCached(gl: WebGLRenderingContext, state: IprogramState) {\r\n    if (state.beDeduce != true) {\r\n        deduceFullShderState(state);\r\n    }\r\n    //---------------------------cullface\r\n    setCullFaceStateWithCached(gl, state.enableCullFace, state.cullBack);\r\n    //----------------depth\r\n    setDepthStateWithCached(gl, state.depthWrite, state.depthTest);\r\n    //------------------------blend\r\n    setBlendStateWithCached(gl, state.enableBlend, state.blendEquation, state.blendSrc, state.blendDst);\r\n    //-------------------------stencil\r\n    setStencilStateWithCached(\r\n        gl,\r\n        state.enableStencilTest,\r\n        state.stencilFunc,\r\n        state.stencilRefValue,\r\n        state.stencilMask,\r\n        state.stencilFail,\r\n        state.stencilPassZfail,\r\n        state.stencilFaileZpass,\r\n    );\r\n}\r\n/**\r\n *\r\n * @param state 原始 webgl state\r\n */\r\n// state 是给每个物体 render用的，是不想受前一个物体render影响，所以需要推断出完整的 webgl state，缺失的按照默认值\r\nfunction deduceFullShderState(state: IprogramState): IprogramState {\r\n    //----------------------------cull face\r\n    if (state.enableCullFace == null) {\r\n        state.enableCullFace = true;\r\n    }\r\n    if (state.enableCullFace) {\r\n        if (state.cullBack == null) {\r\n            state.cullBack = true;\r\n        }\r\n    }\r\n\r\n    //------------------depth\r\n    if (state.depthWrite == null) {\r\n        state.depthWrite = true;\r\n    }\r\n    if (state.depthTest == null) {\r\n        state.depthTest = true;\r\n    }\r\n    if (state.depthTest) {\r\n        if (state.depthTestFuc == null) {\r\n            state.depthTestFuc = GlConstants.LEQUAL;\r\n        }\r\n    }\r\n\r\n    //------------------ blend\r\n    if (state.enableBlend == true) {\r\n        if (state.blendEquation == null) {\r\n            state.blendEquation = GlConstants.FUNC_ADD;\r\n        }\r\n        if (state.blendSrc == null) {\r\n            state.blendSrc = GlConstants.ONE;\r\n        }\r\n        if (state.blendDst == null) {\r\n            state.blendDst = GlConstants.ONE_MINUS_SRC_ALPHA;\r\n        }\r\n    }\r\n\r\n    //---------------------stencil\r\n    if (state.enableStencilTest == true) {\r\n        if (state.stencilFunc == null) {\r\n            state.stencilFunc = GlConstants.ALWAYS;\r\n        }\r\n        if (state.stencilFail == null) {\r\n            state.stencilFail = GlConstants.KEEP;\r\n        }\r\n        if (state.stencilFaileZpass == null) {\r\n            state.stencilFaileZpass = GlConstants.KEEP;\r\n        }\r\n        if (state.stencilPassZfail == null) {\r\n            state.stencilPassZfail = GlConstants.REPLACE;\r\n        }\r\n        if (state.stencilRefValue == null) {\r\n            state.stencilRefValue = 1;\r\n        }\r\n        if (state.stencilMask == null) {\r\n            state.stencilMask = 0xff;\r\n        }\r\n    }\r\n\r\n    return state;\r\n}\r\n","import { GlConstants } from \"./GLConstant\";\r\nimport { IbassProgramInfo, IvertexAttrib, IattributeInfo, IuniformInfo, IprogramOptions, IprogramInfo } from \"./type\";\r\nimport { setProgramStates, setProgramStatesWithCached } from \"./state\";\r\n\r\nexport enum ShaderTypeEnum {\r\n    VS,\r\n    FS,\r\n}\r\n\r\nexport function createProgramInfo(gl: WebGLRenderingContext, op: IprogramOptions): IprogramInfo {\r\n    let info: IprogramInfo = { bassProgram: null };\r\n    if ((op.program as IbassProgramInfo).id != null) {\r\n        info.bassProgram = op.program as IbassProgramInfo;\r\n    } else {\r\n        let bassprogramOp = op.program as {\r\n            vs: string;\r\n            fs: string;\r\n            name: string;\r\n        };\r\n        info.bassProgram = createBassProgramInfo(gl, bassprogramOp.vs, bassprogramOp.fs, bassprogramOp.name);\r\n    }\r\n    if (op.uniforms) {\r\n        info.uniforms = op.uniforms;\r\n    }\r\n    if (op.states) {\r\n        info.states = op.states;\r\n    }\r\n    return info;\r\n}\r\n\r\n/**\r\n * bing program 、set uniforms 、set webgl states\r\n * @param gl\r\n * @param program\r\n */\r\nexport function setProgram(gl: WebGLRenderingContext, program: IprogramInfo) {\r\n    gl.useProgram(program.bassProgram.program);\r\n\r\n    if (program.uniforms) {\r\n        setProgramUniforms(program.bassProgram, program.uniforms);\r\n    }\r\n    if (program.states) {\r\n        setProgramStates(gl, program.states);\r\n    }\r\n}\r\n\r\nexport function setProgramWithCached(gl: WebGLRenderingContext, program: IprogramInfo) {\r\n    if (gl._cachedProgram != program.bassProgram.program) {\r\n        gl._cachedProgram = program.bassProgram.program;\r\n\r\n        gl.useProgram(program.bassProgram.program);\r\n    }\r\n    if (program.uniforms) {\r\n        setProgramUniforms(program.bassProgram, program.uniforms);\r\n    }\r\n    if (program.states) {\r\n        setProgramStatesWithCached(gl, program.states);\r\n    }\r\n}\r\n\r\nexport function setProgramUniforms(info: IbassProgramInfo, uniforms: { [name: string]: any }) {\r\n    for (let key in uniforms) {\r\n        let setter = info.uniformsDic[key].setter;\r\n        let value = uniforms[key];\r\n        setter(value);\r\n    }\r\n}\r\n\r\nclass BassPrograme implements IbassProgramInfo {\r\n    readonly id: number;\r\n    programName: string;\r\n    program: WebGLProgram;\r\n    uniformsDic: { [name: string]: IuniformInfo };\r\n    attsDic: { [name: string]: IattributeInfo };\r\n\r\n    constructor(\r\n        programName: string,\r\n        program: WebGLProgram,\r\n        uniformsDic: { [name: string]: IuniformInfo },\r\n        attsDic: { [name: string]: IattributeInfo },\r\n    ) {\r\n        this.id = BassPrograme.nextID();\r\n        this.programName = programName;\r\n        this.program = program;\r\n        this.uniformsDic = uniformsDic;\r\n        this.attsDic = attsDic;\r\n    }\r\n\r\n    private static count = 0;\r\n    static nextID() {\r\n        return BassPrograme.count++;\r\n    }\r\n}\r\n\r\nexport function createBassProgramInfo(\r\n    gl: WebGLRenderingContext,\r\n    vs: string,\r\n    fs: string,\r\n    name: string,\r\n): IbassProgramInfo {\r\n    let vsShader = createShader(gl, ShaderTypeEnum.VS, vs, name + \"_vs\");\r\n    let fsShader = createShader(gl, ShaderTypeEnum.FS, fs, name + \"_fs\");\r\n    if (vsShader && fsShader) {\r\n        let item = gl.createProgram();\r\n        gl.attachShader(item, vsShader.shader);\r\n        gl.attachShader(item, fsShader.shader);\r\n        gl.linkProgram(item);\r\n        let check = gl.getProgramParameter(item, gl.LINK_STATUS);\r\n        if (check == false) {\r\n            let debguInfo =\r\n                \"ERROR: compile program Error!\" + \"VS:\" + vs + \"   FS:\" + fs + \"\\n\" + gl.getProgramInfoLog(item);\r\n            console.error(debguInfo);\r\n            gl.deleteProgram(item);\r\n            return null;\r\n        } else {\r\n            let attsInfo = getAttributesInfo(gl, item);\r\n            let uniformsInfo = getUniformsInfo(gl, item);\r\n            return new BassPrograme(name, item, uniformsInfo, attsInfo);\r\n            // return { program: item, programName: name, uniformsDic: uniformsInfo, attsDic: attsInfo };\r\n        }\r\n    }\r\n}\r\n\r\nexport function getAttributesInfo(\r\n    gl: WebGLRenderingContext,\r\n    program: WebGLProgram,\r\n): { [attName: string]: IattributeInfo } {\r\n    let attdic: { [attName: string]: IattributeInfo } = {};\r\n    let numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\r\n    for (let i = 0; i < numAttribs; i++) {\r\n        let attribInfo = gl.getActiveAttrib(program, i);\r\n        if (!attribInfo) break;\r\n        let attName = attribInfo.name;\r\n        let attlocation = gl.getAttribLocation(program, attName);\r\n        let func = getAttributeSetter(gl, attlocation);\r\n\r\n        attdic[attName] = { name: attName, location: attlocation, setter: func };\r\n    }\r\n    return attdic;\r\n}\r\n\r\nexport function getUniformsInfo(gl: WebGLRenderingContext, program: WebGLProgram): { [name: string]: IuniformInfo } {\r\n    let uniformDic: { [name: string]: IuniformInfo } = {};\r\n    let numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n\r\n    gl.bindpoint = 0;\r\n    for (let i = 0; i < numUniforms; i++) {\r\n        let uniformInfo = gl.getActiveUniform(program, i);\r\n        if (!uniformInfo) break;\r\n\r\n        let name = uniformInfo.name;\r\n        let type = uniformInfo.type;\r\n        let location = gl.getUniformLocation(program, name);\r\n\r\n        let beArray = false;\r\n        // remove the array suffix.\r\n        if (name.substr(-3) === \"[0]\") {\r\n            beArray = true;\r\n            // name = name.substr(0, name.length - 3);\r\n        }\r\n        if (location == null) continue;\r\n        let bindpoint = gl.bindpoint;\r\n        let func = getUniformSetter(gl, type, beArray, location, bindpoint);\r\n        uniformDic[name] = { name: name, location: location, type: type, setter: func };\r\n    }\r\n    return uniformDic;\r\n}\r\n\r\nexport function createShader(gl: WebGLRenderingContext, type: ShaderTypeEnum, source: string, name: string = null) {\r\n    let target = type == ShaderTypeEnum.VS ? GlConstants.VERTEX_SHADER : GlConstants.FRAGMENT_SHADER;\r\n    let item = gl.createShader(target);\r\n\r\n    gl.shaderSource(item, source);\r\n    gl.compileShader(item);\r\n    let check = gl.getShaderParameter(item, gl.COMPILE_STATUS);\r\n    if (check == false) {\r\n        let debug =\r\n            type == ShaderTypeEnum.VS ? \"ERROR: compile  VS Shader Error! VS:\" : \"ERROR: compile FS Shader Error! FS:\";\r\n        debug = debug + name + \".\\n\";\r\n        console.error(debug + gl.getShaderInfoLog(item));\r\n        gl.deleteShader(item);\r\n        return null;\r\n    } else {\r\n        return { shaderType: type, shaderName: name, shader: item };\r\n    }\r\n}\r\n\r\nexport function getUniformSetter(\r\n    gl: WebGLRenderingContext,\r\n    uniformType: number,\r\n    beArray: boolean,\r\n    location: WebGLUniformLocation,\r\n    bindpoint: number,\r\n) {\r\n    switch (uniformType) {\r\n        case gl.FLOAT:\r\n            if (beArray) {\r\n                return (value: any) => {\r\n                    gl.uniform1f(location, value);\r\n                };\r\n            } else {\r\n                return (value: any) => {\r\n                    gl.uniform1fv(location, value);\r\n                };\r\n            }\r\n            break;\r\n        case gl.FLOAT_VEC2:\r\n            return (value: Float32Array) => {\r\n                gl.uniform2fv(location, value);\r\n            };\r\n            break;\r\n        case gl.FLOAT_VEC3:\r\n            return (value: Float32Array) => {\r\n                gl.uniform3fv(location, value);\r\n            };\r\n            break;\r\n        case gl.FLOAT_VEC4:\r\n            return (value: Float32Array) => {\r\n                gl.uniform4fv(location, value);\r\n            };\r\n            break;\r\n        case gl.INT:\r\n        case gl.BOOL:\r\n            if (beArray) {\r\n                return (value: number[]) => {\r\n                    gl.uniform1iv(location, value);\r\n                };\r\n            } else {\r\n                return (value: number) => {\r\n                    gl.uniform1i(location, value);\r\n                };\r\n            }\r\n            break;\r\n        case gl.INT_VEC2:\r\n        case gl.BOOL_VEC2:\r\n            return (value: number[]) => {\r\n                gl.uniform2iv(location, value);\r\n            };\r\n            break;\r\n        case gl.INT_VEC3:\r\n        case gl.BOOL_VEC3:\r\n            return (value: number[]) => {\r\n                gl.uniform3iv(location, value);\r\n            };\r\n            break;\r\n        case gl.INT_VEC4:\r\n        case gl.BOOL_VEC4:\r\n            return (value: number[]) => {\r\n                gl.uniform4fv(location, value);\r\n            };\r\n            break;\r\n        case gl.FLOAT_MAT2:\r\n            return (value: Float32Array) => {\r\n                gl.uniformMatrix2fv(location, false, value);\r\n            };\r\n        case gl.FLOAT_MAT3:\r\n            return (value: Float32Array) => {\r\n                gl.uniformMatrix3fv(location, false, value);\r\n            };\r\n            break;\r\n        case gl.FLOAT_MAT4:\r\n            return (value: Float32Array) => {\r\n                gl.uniformMatrix4fv(location, false, value);\r\n            };\r\n            break;\r\n        case gl.SAMPLER_2D:\r\n            return (value: WebGLTexture) => {\r\n                gl.activeTexture(gl.TEXTURE0 + bindpoint);\r\n                gl.bindTexture(gl.TEXTURE_2D, value);\r\n                gl.uniform1i(location, bindpoint);\r\n\r\n                gl.bindpoint = gl.bindpoint + 1;\r\n            };\r\n        default:\r\n            console.error(\"uniformSetter not handle type:\" + uniformType + \" yet!\");\r\n            break;\r\n    }\r\n}\r\n\r\nexport function getAttributeSetter(gl: WebGLRenderingContext, location: number) {\r\n    return (value: IvertexAttrib) => {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, value.glBuffer);\r\n        gl.enableVertexAttribArray(location);\r\n        gl.vertexAttribPointer(\r\n            location,\r\n            value.componentSize,\r\n            value.componentDataType,\r\n            value.normalize,\r\n            value.bytesStride,\r\n            value.bytesOffset,\r\n        );\r\n        if (value.divisor !== undefined) {\r\n            gl.vertexAttribDivisor(location, value.divisor);\r\n        }\r\n    };\r\n}\r\n","/**\r\n * Enum containing WebGL Constant values by name.\r\n * for use without an active WebGL context, or in cases where certain constants are unavailable using the WebGL context\r\n * (For example, in [Safari 9]{@link https://github.com/AnalyticalGraphicsInc/cesium/issues/2989}).\r\n *\r\n * These match the constants from the [WebGL 1.0]{@link https://www.khronos.org/registry/webgl/specs/latest/1.0/}\r\n * and [WebGL 2.0]{@link https://www.khronos.org/registry/webgl/specs/latest/2.0/}\r\n * specifications.\r\n */\r\nexport enum GlConstants {\r\n    DEPTH_BUFFER_BIT = 0x00000100,\r\n    STENCIL_BUFFER_BIT = 0x00000400,\r\n    COLOR_BUFFER_BIT = 0x00004000,\r\n    POINTS = 0x0000,\r\n    LINES = 0x0001,\r\n    LINE_LOOP = 0x0002,\r\n    LINE_STRIP = 0x0003,\r\n    TRIANGLES = 0x0004,\r\n    TRIANGLE_STRIP = 0x0005,\r\n    TRIANGLE_FAN = 0x0006,\r\n    ZERO = 0,\r\n    ONE = 1,\r\n    SRC_COLOR = 0x0300,\r\n    ONE_MINUS_SRC_COLOR = 0x0301,\r\n    SRC_ALPHA = 0x0302,\r\n    ONE_MINUS_SRC_ALPHA = 0x0303,\r\n    DST_ALPHA = 0x0304,\r\n    ONE_MINUS_DST_ALPHA = 0x0305,\r\n    DST_COLOR = 0x0306,\r\n    ONE_MINUS_DST_COLOR = 0x0307,\r\n    SRC_ALPHA_SATURATE = 0x0308,\r\n    FUNC_ADD = 0x8006,\r\n    BLEND_EQUATION = 0x8009,\r\n    BLEND_EQUATION_RGB = 0x8009, // same as BLEND_EQUATION\r\n    BLEND_EQUATION_ALPHA = 0x883d,\r\n    FUNC_SUBTRACT = 0x800a,\r\n    FUNC_REVERSE_SUBTRACT = 0x800b,\r\n    BLEND_DST_RGB = 0x80c8,\r\n    BLEND_SRC_RGB = 0x80c9,\r\n    BLEND_DST_ALPHA = 0x80ca,\r\n    BLEND_SRC_ALPHA = 0x80cb,\r\n    CONSTANT_COLOR = 0x8001,\r\n    ONE_MINUS_CONSTANT_COLOR = 0x8002,\r\n    CONSTANT_ALPHA = 0x8003,\r\n    ONE_MINUS_CONSTANT_ALPHA = 0x8004,\r\n    BLEND_COLOR = 0x8005,\r\n    ARRAY_BUFFER = 0x8892,\r\n    ELEMENT_ARRAY_BUFFER = 0x8893,\r\n    ARRAY_BUFFER_BINDING = 0x8894,\r\n    ELEMENT_ARRAY_BUFFER_BINDING = 0x8895,\r\n    STREAM_DRAW = 0x88e0,\r\n    STATIC_DRAW = 0x88e4,\r\n    DYNAMIC_DRAW = 0x88e8,\r\n    BUFFER_SIZE = 0x8764,\r\n    BUFFER_USAGE = 0x8765,\r\n    CURRENT_VERTEX_ATTRIB = 0x8626,\r\n    FRONT = 0x0404,\r\n    BACK = 0x0405,\r\n    FRONT_AND_BACK = 0x0408,\r\n    CULL_FACE = 0x0b44,\r\n    BLEND = 0x0be2,\r\n    DITHER = 0x0bd0,\r\n    STENCIL_TEST = 0x0b90,\r\n    DEPTH_TEST = 0x0b71,\r\n    SCISSOR_TEST = 0x0c11,\r\n    POLYGON_OFFSET_FILL = 0x8037,\r\n    SAMPLE_ALPHA_TO_COVERAGE = 0x809e,\r\n    SAMPLE_COVERAGE = 0x80a0,\r\n    NO_ERROR = 0,\r\n    INVALID_ENUM = 0x0500,\r\n    INVALID_VALUE = 0x0501,\r\n    INVALID_OPERATION = 0x0502,\r\n    OUT_OF_MEMORY = 0x0505,\r\n    CW = 0x0900,\r\n    CCW = 0x0901,\r\n    LINE_WIDTH = 0x0b21,\r\n    ALIASED_POINT_SIZE_RANGE = 0x846d,\r\n    ALIASED_LINE_WIDTH_RANGE = 0x846e,\r\n    CULL_FACE_MODE = 0x0b45,\r\n    FRONT_FACE = 0x0b46,\r\n    DEPTH_RANGE = 0x0b70,\r\n    DEPTH_WRITEMASK = 0x0b72,\r\n    DEPTH_CLEAR_VALUE = 0x0b73,\r\n    DEPTH_FUNC = 0x0b74,\r\n    STENCIL_CLEAR_VALUE = 0x0b91,\r\n    STENCIL_FUNC = 0x0b92,\r\n    STENCIL_FAIL = 0x0b94,\r\n    STENCIL_PASS_DEPTH_FAIL = 0x0b95,\r\n    STENCIL_PASS_DEPTH_PASS = 0x0b96,\r\n    STENCIL_REF = 0x0b97,\r\n    STENCIL_VALUE_MASK = 0x0b93,\r\n    STENCIL_WRITEMASK = 0x0b98,\r\n    STENCIL_BACK_FUNC = 0x8800,\r\n    STENCIL_BACK_FAIL = 0x8801,\r\n    STENCIL_BACK_PASS_DEPTH_FAIL = 0x8802,\r\n    STENCIL_BACK_PASS_DEPTH_PASS = 0x8803,\r\n    STENCIL_BACK_REF = 0x8ca3,\r\n    STENCIL_BACK_VALUE_MASK = 0x8ca4,\r\n    STENCIL_BACK_WRITEMASK = 0x8ca5,\r\n    VIEWPORT = 0x0ba2,\r\n    SCISSOR_BOX = 0x0c10,\r\n    COLOR_CLEAR_VALUE = 0x0c22,\r\n    COLOR_WRITEMASK = 0x0c23,\r\n    UNPACK_ALIGNMENT = 0x0cf5,\r\n    PACK_ALIGNMENT = 0x0d05,\r\n    MAX_TEXTURE_SIZE = 0x0d33,\r\n    MAX_VIEWPORT_DIMS = 0x0d3a,\r\n    SUBPIXEL_BITS = 0x0d50,\r\n    RED_BITS = 0x0d52,\r\n    GREEN_BITS = 0x0d53,\r\n    BLUE_BITS = 0x0d54,\r\n    ALPHA_BITS = 0x0d55,\r\n    DEPTH_BITS = 0x0d56,\r\n    STENCIL_BITS = 0x0d57,\r\n    POLYGON_OFFSET_UNITS = 0x2a00,\r\n    POLYGON_OFFSET_FACTOR = 0x8038,\r\n    TEXTURE_BINDING_2D = 0x8069,\r\n    SAMPLE_BUFFERS = 0x80a8,\r\n    SAMPLES = 0x80a9,\r\n    SAMPLE_COVERAGE_VALUE = 0x80aa,\r\n    SAMPLE_COVERAGE_INVERT = 0x80ab,\r\n    COMPRESSED_TEXTURE_FORMATS = 0x86a3,\r\n    DONT_CARE = 0x1100,\r\n    FASTEST = 0x1101,\r\n    NICEST = 0x1102,\r\n    GENERATE_MIPMAP_HINT = 0x8192,\r\n    BYTE = 0x1400,\r\n    UNSIGNED_BYTE = 0x1401,\r\n    SHORT = 0x1402,\r\n    UNSIGNED_SHORT = 0x1403,\r\n    INT = 0x1404,\r\n    UNSIGNED_INT = 0x1405,\r\n    FLOAT = 0x1406,\r\n    DEPTH_COMPONENT = 0x1902,\r\n    ALPHA = 0x1906,\r\n    RGB = 0x1907,\r\n    RGBA = 0x1908,\r\n    LUMINANCE = 0x1909,\r\n    LUMINANCE_ALPHA = 0x190a,\r\n    UNSIGNED_SHORT_4_4_4_4 = 0x8033,\r\n    UNSIGNED_SHORT_5_5_5_1 = 0x8034,\r\n    UNSIGNED_SHORT_5_6_5 = 0x8363,\r\n    FRAGMENT_SHADER = 0x8b30,\r\n    VERTEX_SHADER = 0x8b31,\r\n    MAX_VERTEX_ATTRIBS = 0x8869,\r\n    MAX_VERTEX_UNIFORM_VECTORS = 0x8dfb,\r\n    MAX_VARYING_VECTORS = 0x8dfc,\r\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8b4d,\r\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8b4c,\r\n    MAX_TEXTURE_IMAGE_UNITS = 0x8872,\r\n    MAX_FRAGMENT_UNIFORM_VECTORS = 0x8dfd,\r\n    SHADER_TYPE = 0x8b4f,\r\n    DELETE_STATUS = 0x8b80,\r\n    LINK_STATUS = 0x8b82,\r\n    VALIDATE_STATUS = 0x8b83,\r\n    ATTACHED_SHADERS = 0x8b85,\r\n    ACTIVE_UNIFORMS = 0x8b86,\r\n    ACTIVE_ATTRIBUTES = 0x8b89,\r\n    SHADING_LANGUAGE_VERSION = 0x8b8c,\r\n    CURRENT_PROGRAM = 0x8b8d,\r\n    NEVER = 0x0200,\r\n    LESS = 0x0201,\r\n    EQUAL = 0x0202,\r\n    LEQUAL = 0x0203,\r\n    GREATER = 0x0204,\r\n    NOTEQUAL = 0x0205,\r\n    GEQUAL = 0x0206,\r\n    ALWAYS = 0x0207,\r\n    KEEP = 0x1e00,\r\n    REPLACE = 0x1e01,\r\n    INCR = 0x1e02,\r\n    DECR = 0x1e03,\r\n    INVERT = 0x150a,\r\n    INCR_WRAP = 0x8507,\r\n    DECR_WRAP = 0x8508,\r\n    VENDOR = 0x1f00,\r\n    RENDERER = 0x1f01,\r\n    VERSION = 0x1f02,\r\n    NEAREST = 0x2600,\r\n    LINEAR = 0x2601,\r\n    NEAREST_MIPMAP_NEAREST = 0x2700,\r\n    LINEAR_MIPMAP_NEAREST = 0x2701,\r\n    NEAREST_MIPMAP_LINEAR = 0x2702,\r\n    LINEAR_MIPMAP_LINEAR = 0x2703,\r\n    TEXTURE_MAG_FILTER = 0x2800,\r\n    TEXTURE_MIN_FILTER = 0x2801,\r\n    TEXTURE_WRAP_S = 0x2802,\r\n    TEXTURE_WRAP_T = 0x2803,\r\n    TEXTURE_2D = 0x0de1,\r\n    TEXTURE = 0x1702,\r\n    TEXTURE_CUBE_MAP = 0x8513,\r\n    TEXTURE_BINDING_CUBE_MAP = 0x8514,\r\n    TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_X = 0x8516,\r\n    TEXTURE_CUBE_MAP_POSITIVE_Y = 0x8517,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_Y = 0x8518,\r\n    TEXTURE_CUBE_MAP_POSITIVE_Z = 0x8519,\r\n    TEXTURE_CUBE_MAP_NEGATIVE_Z = 0x851a,\r\n    MAX_CUBE_MAP_TEXTURE_SIZE = 0x851c,\r\n    TEXTURE0 = 0x84c0,\r\n    TEXTURE1 = 0x84c1,\r\n    TEXTURE2 = 0x84c2,\r\n    TEXTURE3 = 0x84c3,\r\n    TEXTURE4 = 0x84c4,\r\n    TEXTURE5 = 0x84c5,\r\n    TEXTURE6 = 0x84c6,\r\n    TEXTURE7 = 0x84c7,\r\n    TEXTURE8 = 0x84c8,\r\n    TEXTURE9 = 0x84c9,\r\n    TEXTURE10 = 0x84ca,\r\n    TEXTURE11 = 0x84cb,\r\n    TEXTURE12 = 0x84cc,\r\n    TEXTURE13 = 0x84cd,\r\n    TEXTURE14 = 0x84ce,\r\n    TEXTURE15 = 0x84cf,\r\n    TEXTURE16 = 0x84d0,\r\n    TEXTURE17 = 0x84d1,\r\n    TEXTURE18 = 0x84d2,\r\n    TEXTURE19 = 0x84d3,\r\n    TEXTURE20 = 0x84d4,\r\n    TEXTURE21 = 0x84d5,\r\n    TEXTURE22 = 0x84d6,\r\n    TEXTURE23 = 0x84d7,\r\n    TEXTURE24 = 0x84d8,\r\n    TEXTURE25 = 0x84d9,\r\n    TEXTURE26 = 0x84da,\r\n    TEXTURE27 = 0x84db,\r\n    TEXTURE28 = 0x84dc,\r\n    TEXTURE29 = 0x84dd,\r\n    TEXTURE30 = 0x84de,\r\n    TEXTURE31 = 0x84df,\r\n    ACTIVE_TEXTURE = 0x84e0,\r\n    REPEAT = 0x2901,\r\n    CLAMP_TO_EDGE = 0x812f,\r\n    MIRRORED_REPEAT = 0x8370,\r\n    FLOAT_VEC2 = 0x8b50,\r\n    FLOAT_VEC3 = 0x8b51,\r\n    FLOAT_VEC4 = 0x8b52,\r\n    INT_VEC2 = 0x8b53,\r\n    INT_VEC3 = 0x8b54,\r\n    INT_VEC4 = 0x8b55,\r\n    BOOL = 0x8b56,\r\n    BOOL_VEC2 = 0x8b57,\r\n    BOOL_VEC3 = 0x8b58,\r\n    BOOL_VEC4 = 0x8b59,\r\n    FLOAT_MAT2 = 0x8b5a,\r\n    FLOAT_MAT3 = 0x8b5b,\r\n    FLOAT_MAT4 = 0x8b5c,\r\n    SAMPLER_2D = 0x8b5e,\r\n    SAMPLER_CUBE = 0x8b60,\r\n    VERTEX_ATTRIB_ARRAY_ENABLED = 0x8622,\r\n    VERTEX_ATTRIB_ARRAY_SIZE = 0x8623,\r\n    VERTEX_ATTRIB_ARRAY_STRIDE = 0x8624,\r\n    VERTEX_ATTRIB_ARRAY_TYPE = 0x8625,\r\n    VERTEX_ATTRIB_ARRAY_NORMALIZED = 0x886a,\r\n    VERTEX_ATTRIB_ARRAY_POINTER = 0x8645,\r\n    VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889f,\r\n    IMPLEMENTATION_COLOR_READ_TYPE = 0x8b9a,\r\n    IMPLEMENTATION_COLOR_READ_FORMAT = 0x8b9b,\r\n    COMPILE_STATUS = 0x8b81,\r\n    LOW_FLOAT = 0x8df0,\r\n    MEDIUM_FLOAT = 0x8df1,\r\n    HIGH_FLOAT = 0x8df2,\r\n    LOW_INT = 0x8df3,\r\n    MEDIUM_INT = 0x8df4,\r\n    HIGH_INT = 0x8df5,\r\n    FRAMEBUFFER = 0x8d40,\r\n    RENDERBUFFER = 0x8d41,\r\n    RGBA4 = 0x8056,\r\n    RGB5_A1 = 0x8057,\r\n    RGB565 = 0x8d62,\r\n    DEPTH_COMPONENT16 = 0x81a5,\r\n    STENCIL_INDEX = 0x1901,\r\n    STENCIL_INDEX8 = 0x8d48,\r\n    DEPTH_STENCIL = 0x84f9,\r\n    RENDERBUFFER_WIDTH = 0x8d42,\r\n    RENDERBUFFER_HEIGHT = 0x8d43,\r\n    RENDERBUFFER_INTERNAL_FORMAT = 0x8d44,\r\n    RENDERBUFFER_RED_SIZE = 0x8d50,\r\n    RENDERBUFFER_GREEN_SIZE = 0x8d51,\r\n    RENDERBUFFER_BLUE_SIZE = 0x8d52,\r\n    RENDERBUFFER_ALPHA_SIZE = 0x8d53,\r\n    RENDERBUFFER_DEPTH_SIZE = 0x8d54,\r\n    RENDERBUFFER_STENCIL_SIZE = 0x8d55,\r\n    FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 0x8cd0,\r\n    FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 0x8cd1,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 0x8cd2,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8cd3,\r\n    COLOR_ATTACHMENT0 = 0x8ce0,\r\n    DEPTH_ATTACHMENT = 0x8d00,\r\n    STENCIL_ATTACHMENT = 0x8d20,\r\n    DEPTH_STENCIL_ATTACHMENT = 0x821a,\r\n    NONE = 0,\r\n    FRAMEBUFFER_COMPLETE = 0x8cd5,\r\n    FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8cd6,\r\n    FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8cd7,\r\n    FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8cd9,\r\n    FRAMEBUFFER_UNSUPPORTED = 0x8cdd,\r\n    FRAMEBUFFER_BINDING = 0x8ca6,\r\n    RENDERBUFFER_BINDING = 0x8ca7,\r\n    MAX_RENDERBUFFER_SIZE = 0x84e8,\r\n    INVALID_FRAMEBUFFER_OPERATION = 0x0506,\r\n    UNPACK_FLIP_Y_WEBGL = 0x9240,\r\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241,\r\n    CONTEXT_LOST_WEBGL = 0x9242,\r\n    UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243,\r\n    BROWSER_DEFAULT_WEBGL = 0x9244,\r\n\r\n    // WEBGL_compressed_texture_s3tc\r\n    COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83f0,\r\n    COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83f1,\r\n    COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83f2,\r\n    COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83f3,\r\n\r\n    // WEBGL_compressed_texture_pvrtc\r\n    COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8c00,\r\n    COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8c01,\r\n    COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8c02,\r\n    COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8c03,\r\n\r\n    // WEBGL_compressed_texture_etc1\r\n    COMPRESSED_RGB_ETC1_WEBGL = 0x8d64,\r\n\r\n    // Desktop OpenGL\r\n    DOUBLE = 0x140a,\r\n\r\n    // WebGL 2\r\n    READ_BUFFER = 0x0c02,\r\n    UNPACK_ROW_LENGTH = 0x0cf2,\r\n    UNPACK_SKIP_ROWS = 0x0cf3,\r\n    UNPACK_SKIP_PIXELS = 0x0cf4,\r\n    PACK_ROW_LENGTH = 0x0d02,\r\n    PACK_SKIP_ROWS = 0x0d03,\r\n    PACK_SKIP_PIXELS = 0x0d04,\r\n    COLOR = 0x1800,\r\n    DEPTH = 0x1801,\r\n    STENCIL = 0x1802,\r\n    RED = 0x1903,\r\n    RGB8 = 0x8051,\r\n    RGBA8 = 0x8058,\r\n    RGB10_A2 = 0x8059,\r\n    TEXTURE_BINDING_3D = 0x806a,\r\n    UNPACK_SKIP_IMAGES = 0x806d,\r\n    UNPACK_IMAGE_HEIGHT = 0x806e,\r\n    TEXTURE_3D = 0x806f,\r\n    TEXTURE_WRAP_R = 0x8072,\r\n    MAX_3D_TEXTURE_SIZE = 0x8073,\r\n    UNSIGNED_INT_2_10_10_10_REV = 0x8368,\r\n    MAX_ELEMENTS_VERTICES = 0x80e8,\r\n    MAX_ELEMENTS_INDICES = 0x80e9,\r\n    TEXTURE_MIN_LOD = 0x813a,\r\n    TEXTURE_MAX_LOD = 0x813b,\r\n    TEXTURE_BASE_LEVEL = 0x813c,\r\n    TEXTURE_MAX_LEVEL = 0x813d,\r\n    MIN = 0x8007,\r\n    MAX = 0x8008,\r\n    DEPTH_COMPONENT24 = 0x81a6,\r\n    MAX_TEXTURE_LOD_BIAS = 0x84fd,\r\n    TEXTURE_COMPARE_MODE = 0x884c,\r\n    TEXTURE_COMPARE_FUNC = 0x884d,\r\n    CURRENT_QUERY = 0x8865,\r\n    QUERY_RESULT = 0x8866,\r\n    QUERY_RESULT_AVAILABLE = 0x8867,\r\n    STREAM_READ = 0x88e1,\r\n    STREAM_COPY = 0x88e2,\r\n    STATIC_READ = 0x88e5,\r\n    STATIC_COPY = 0x88e6,\r\n    DYNAMIC_READ = 0x88e9,\r\n    DYNAMIC_COPY = 0x88ea,\r\n    MAX_DRAW_BUFFERS = 0x8824,\r\n    DRAW_BUFFER0 = 0x8825,\r\n    DRAW_BUFFER1 = 0x8826,\r\n    DRAW_BUFFER2 = 0x8827,\r\n    DRAW_BUFFER3 = 0x8828,\r\n    DRAW_BUFFER4 = 0x8829,\r\n    DRAW_BUFFER5 = 0x882a,\r\n    DRAW_BUFFER6 = 0x882b,\r\n    DRAW_BUFFER7 = 0x882c,\r\n    DRAW_BUFFER8 = 0x882d,\r\n    DRAW_BUFFER9 = 0x882e,\r\n    DRAW_BUFFER10 = 0x882f,\r\n    DRAW_BUFFER11 = 0x8830,\r\n    DRAW_BUFFER12 = 0x8831,\r\n    DRAW_BUFFER13 = 0x8832,\r\n    DRAW_BUFFER14 = 0x8833,\r\n    DRAW_BUFFER15 = 0x8834,\r\n    MAX_FRAGMENT_UNIFORM_COMPONENTS = 0x8b49,\r\n    MAX_VERTEX_UNIFORM_COMPONENTS = 0x8b4a,\r\n    SAMPLER_3D = 0x8b5f,\r\n    SAMPLER_2D_SHADOW = 0x8b62,\r\n    FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b,\r\n    PIXEL_PACK_BUFFER = 0x88eb,\r\n    PIXEL_UNPACK_BUFFER = 0x88ec,\r\n    PIXEL_PACK_BUFFER_BINDING = 0x88ed,\r\n    PIXEL_UNPACK_BUFFER_BINDING = 0x88ef,\r\n    FLOAT_MAT2X3 = 0x8b65,\r\n    FLOAT_MAT2X4 = 0x8b66,\r\n    FLOAT_MAT3X2 = 0x8b67,\r\n    FLOAT_MAT3X4 = 0x8b68,\r\n    FLOAT_MAT4X2 = 0x8b69,\r\n    FLOAT_MAT4X3 = 0x8b6a,\r\n    SRGB = 0x8c40,\r\n    SRGB8 = 0x8c41,\r\n    SRGB8_ALPHA8 = 0x8c43,\r\n    COMPARE_REF_TO_TEXTURE = 0x884e,\r\n    RGBA32F = 0x8814,\r\n    RGB32F = 0x8815,\r\n    RGBA16F = 0x881a,\r\n    RGB16F = 0x881b,\r\n    VERTEX_ATTRIB_ARRAY_INTEGER = 0x88fd,\r\n    MAX_ARRAY_TEXTURE_LAYERS = 0x88ff,\r\n    MIN_PROGRAM_TEXEL_OFFSET = 0x8904,\r\n    MAX_PROGRAM_TEXEL_OFFSET = 0x8905,\r\n    MAX_VARYING_COMPONENTS = 0x8b4b,\r\n    TEXTURE_2D_ARRAY = 0x8c1a,\r\n    TEXTURE_BINDING_2D_ARRAY = 0x8c1d,\r\n    R11F_G11F_B10F = 0x8c3a,\r\n    UNSIGNED_INT_10F_11F_11F_REV = 0x8c3b,\r\n    RGB9_E5 = 0x8c3d,\r\n    UNSIGNED_INT_5_9_9_9_REV = 0x8c3e,\r\n    TRANSFORM_FEEDBACK_BUFFER_MODE = 0x8c7f,\r\n    MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 0x8c80,\r\n    TRANSFORM_FEEDBACK_VARYINGS = 0x8c83,\r\n    TRANSFORM_FEEDBACK_BUFFER_START = 0x8c84,\r\n    TRANSFORM_FEEDBACK_BUFFER_SIZE = 0x8c85,\r\n    TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88,\r\n    RASTERIZER_DISCARD = 0x8c89,\r\n    MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 0x8c8a,\r\n    MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 0x8c8b,\r\n    INTERLEAVED_ATTRIBS = 0x8c8c,\r\n    SEPARATE_ATTRIBS = 0x8c8d,\r\n    TRANSFORM_FEEDBACK_BUFFER = 0x8c8e,\r\n    TRANSFORM_FEEDBACK_BUFFER_BINDING = 0x8c8f,\r\n    RGBA32UI = 0x8d70,\r\n    RGB32UI = 0x8d71,\r\n    RGBA16UI = 0x8d76,\r\n    RGB16UI = 0x8d77,\r\n    RGBA8UI = 0x8d7c,\r\n    RGB8UI = 0x8d7d,\r\n    RGBA32I = 0x8d82,\r\n    RGB32I = 0x8d83,\r\n    RGBA16I = 0x8d88,\r\n    RGB16I = 0x8d89,\r\n    RGBA8I = 0x8d8e,\r\n    RGB8I = 0x8d8f,\r\n    RED_INTEGER = 0x8d94,\r\n    RGB_INTEGER = 0x8d98,\r\n    RGBA_INTEGER = 0x8d99,\r\n    SAMPLER_2D_ARRAY = 0x8dc1,\r\n    SAMPLER_2D_ARRAY_SHADOW = 0x8dc4,\r\n    SAMPLER_CUBE_SHADOW = 0x8dc5,\r\n    UNSIGNED_INT_VEC2 = 0x8dc6,\r\n    UNSIGNED_INT_VEC3 = 0x8dc7,\r\n    UNSIGNED_INT_VEC4 = 0x8dc8,\r\n    INT_SAMPLER_2D = 0x8dca,\r\n    INT_SAMPLER_3D = 0x8dcb,\r\n    INT_SAMPLER_CUBE = 0x8dcc,\r\n    INT_SAMPLER_2D_ARRAY = 0x8dcf,\r\n    UNSIGNED_INT_SAMPLER_2D = 0x8dd2,\r\n    UNSIGNED_INT_SAMPLER_3D = 0x8dd3,\r\n    UNSIGNED_INT_SAMPLER_CUBE = 0x8dd4,\r\n    UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8dd7,\r\n    DEPTH_COMPONENT32F = 0x8cac,\r\n    DEPTH32F_STENCIL8 = 0x8cad,\r\n    FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8dad,\r\n    FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 0x8210,\r\n    FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 0x8211,\r\n    FRAMEBUFFER_ATTACHMENT_RED_SIZE = 0x8212,\r\n    FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 0x8213,\r\n    FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 0x8214,\r\n    FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 0x8215,\r\n    FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 0x8216,\r\n    FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 0x8217,\r\n    FRAMEBUFFER_DEFAULT = 0x8218,\r\n    UNSIGNED_INT_24_8 = 0x84fa,\r\n    DEPTH24_STENCIL8 = 0x88f0,\r\n    UNSIGNED_NORMALIZED = 0x8c17,\r\n    DRAW_FRAMEBUFFER_BINDING = 0x8ca6, // Same as FRAMEBUFFER_BINDING\r\n    READ_FRAMEBUFFER = 0x8ca8,\r\n    DRAW_FRAMEBUFFER = 0x8ca9,\r\n    READ_FRAMEBUFFER_BINDING = 0x8caa,\r\n    RENDERBUFFER_SAMPLES = 0x8cab,\r\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 0x8cd4,\r\n    MAX_COLOR_ATTACHMENTS = 0x8cdf,\r\n    COLOR_ATTACHMENT1 = 0x8ce1,\r\n    COLOR_ATTACHMENT2 = 0x8ce2,\r\n    COLOR_ATTACHMENT3 = 0x8ce3,\r\n    COLOR_ATTACHMENT4 = 0x8ce4,\r\n    COLOR_ATTACHMENT5 = 0x8ce5,\r\n    COLOR_ATTACHMENT6 = 0x8ce6,\r\n    COLOR_ATTACHMENT7 = 0x8ce7,\r\n    COLOR_ATTACHMENT8 = 0x8ce8,\r\n    COLOR_ATTACHMENT9 = 0x8ce9,\r\n    COLOR_ATTACHMENT10 = 0x8cea,\r\n    COLOR_ATTACHMENT11 = 0x8ceb,\r\n    COLOR_ATTACHMENT12 = 0x8cec,\r\n    COLOR_ATTACHMENT13 = 0x8ced,\r\n    COLOR_ATTACHMENT14 = 0x8cee,\r\n    COLOR_ATTACHMENT15 = 0x8cef,\r\n    FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 0x8d56,\r\n    MAX_SAMPLES = 0x8d57,\r\n    HALF_FLOAT = 0x140b,\r\n    HALF_FLOAT_OES = 0x8d61,\r\n    RG = 0x8227,\r\n    RG_INTEGER = 0x8228,\r\n    R8 = 0x8229,\r\n    RG8 = 0x822b,\r\n    R16F = 0x822d,\r\n    R32F = 0x822e,\r\n    RG16F = 0x822f,\r\n    RG32F = 0x8230,\r\n    R8I = 0x8231,\r\n    R8UI = 0x8232,\r\n    R16I = 0x8233,\r\n    R16UI = 0x8234,\r\n    R32I = 0x8235,\r\n    R32UI = 0x8236,\r\n    RG8I = 0x8237,\r\n    RG8UI = 0x8238,\r\n    RG16I = 0x8239,\r\n    RG16UI = 0x823a,\r\n    RG32I = 0x823b,\r\n    RG32UI = 0x823c,\r\n    VERTEX_ARRAY_BINDING = 0x85b5,\r\n    R8_SNORM = 0x8f94,\r\n    RG8_SNORM = 0x8f95,\r\n    RGB8_SNORM = 0x8f96,\r\n    RGBA8_SNORM = 0x8f97,\r\n    SIGNED_NORMALIZED = 0x8f9c,\r\n    COPY_READ_BUFFER = 0x8f36,\r\n    COPY_WRITE_BUFFER = 0x8f37,\r\n    COPY_READ_BUFFER_BINDING = 0x8f36, // Same as COPY_READ_BUFFER\r\n    COPY_WRITE_BUFFER_BINDING = 0x8f37, // Same as COPY_WRITE_BUFFER\r\n    UNIFORM_BUFFER = 0x8a11,\r\n    UNIFORM_BUFFER_BINDING = 0x8a28,\r\n    UNIFORM_BUFFER_START = 0x8a29,\r\n    UNIFORM_BUFFER_SIZE = 0x8a2a,\r\n    MAX_VERTEX_UNIFORM_BLOCKS = 0x8a2b,\r\n    MAX_FRAGMENT_UNIFORM_BLOCKS = 0x8a2d,\r\n    MAX_COMBINED_UNIFORM_BLOCKS = 0x8a2e,\r\n    MAX_UNIFORM_BUFFER_BINDINGS = 0x8a2f,\r\n    MAX_UNIFORM_BLOCK_SIZE = 0x8a30,\r\n    MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 0x8a31,\r\n    MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 0x8a33,\r\n    UNIFORM_BUFFER_OFFSET_ALIGNMENT = 0x8a34,\r\n    ACTIVE_UNIFORM_BLOCKS = 0x8a36,\r\n    UNIFORM_TYPE = 0x8a37,\r\n    UNIFORM_SIZE = 0x8a38,\r\n    UNIFORM_BLOCK_INDEX = 0x8a3a,\r\n    UNIFORM_OFFSET = 0x8a3b,\r\n    UNIFORM_ARRAY_STRIDE = 0x8a3c,\r\n    UNIFORM_MATRIX_STRIDE = 0x8a3d,\r\n    UNIFORM_IS_ROW_MAJOR = 0x8a3e,\r\n    UNIFORM_BLOCK_BINDING = 0x8a3f,\r\n    UNIFORM_BLOCK_DATA_SIZE = 0x8a40,\r\n    UNIFORM_BLOCK_ACTIVE_UNIFORMS = 0x8a42,\r\n    UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 0x8a43,\r\n    UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 0x8a44,\r\n    UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46,\r\n    INVALID_INDEX = 0xffffffff,\r\n    MAX_VERTEX_OUTPUT_COMPONENTS = 0x9122,\r\n    MAX_FRAGMENT_INPUT_COMPONENTS = 0x9125,\r\n    MAX_SERVER_WAIT_TIMEOUT = 0x9111,\r\n    OBJECT_TYPE = 0x9112,\r\n    SYNC_CONDITION = 0x9113,\r\n    SYNC_STATUS = 0x9114,\r\n    SYNC_FLAGS = 0x9115,\r\n    SYNC_FENCE = 0x9116,\r\n    SYNC_GPU_COMMANDS_COMPLETE = 0x9117,\r\n    UNSIGNALED = 0x9118,\r\n    SIGNALED = 0x9119,\r\n    ALREADY_SIGNALED = 0x911a,\r\n    TIMEOUT_EXPIRED = 0x911b,\r\n    CONDITION_SATISFIED = 0x911c,\r\n    WAIT_FAILED = 0x911d,\r\n    SYNC_FLUSH_COMMANDS_BIT = 0x00000001,\r\n    VERTEX_ATTRIB_ARRAY_DIVISOR = 0x88fe,\r\n    ANY_SAMPLES_PASSED = 0x8c2f,\r\n    ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a,\r\n    SAMPLER_BINDING = 0x8919,\r\n    RGB10_A2UI = 0x906f,\r\n    INT_2_10_10_10_REV = 0x8d9f,\r\n    TRANSFORM_FEEDBACK = 0x8e22,\r\n    TRANSFORM_FEEDBACK_PAUSED = 0x8e23,\r\n    TRANSFORM_FEEDBACK_ACTIVE = 0x8e24,\r\n    TRANSFORM_FEEDBACK_BINDING = 0x8e25,\r\n    COMPRESSED_R11_EAC = 0x9270,\r\n    COMPRESSED_SIGNED_R11_EAC = 0x9271,\r\n    COMPRESSED_RG11_EAC = 0x9272,\r\n    COMPRESSED_SIGNED_RG11_EAC = 0x9273,\r\n    COMPRESSED_RGB8_ETC2 = 0x9274,\r\n    COMPRESSED_SRGB8_ETC2 = 0x9275,\r\n    COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9276,\r\n    COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9277,\r\n    COMPRESSED_RGBA8_ETC2_EAC = 0x9278,\r\n    COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9279,\r\n    TEXTURE_IMMUTABLE_FORMAT = 0x912f,\r\n    MAX_ELEMENT_INDEX = 0x8d6b,\r\n    TEXTURE_IMMUTABLE_LEVELS = 0x82df,\r\n\r\n    // Extensions\r\n    MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff,\r\n}\r\n","import { GlConstants } from \"./GLConstant\";\r\nimport { getGLTypeForTypedArray } from \"./Helper\";\r\nimport { ItextureInfo, ItexViewDataInfo, ItexImageDataInfo } from \"./type\";\r\n\r\nexport function createTextureFromTypedArray(gl: WebGLRenderingContext, data: ArrayBufferView, texOP: ItexViewDataInfo) {\r\n    deduceTextureTypedArrayOption(gl, data, texOP);\r\n    let tex = gl.createTexture();\r\n    gl.bindTexture(texOP.target, tex);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_MAG_FILTER, texOP.filterMax);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_MIN_FILTER, texOP.filterMin);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_WRAP_S, texOP.wrapS);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_WRAP_T, texOP.wrapT);\r\n\r\n    gl.texImage2D(\r\n        texOP.target,\r\n        0,\r\n        texOP.pixelFormat,\r\n        texOP.width,\r\n        texOP.height,\r\n        0,\r\n        texOP.pixelFormat,\r\n        texOP.pixelDatatype,\r\n        data,\r\n    );\r\n}\r\n\r\nexport function createTextureFromImageSource(\r\n    gl: WebGLRenderingContext,\r\n    data: TexImageSource,\r\n    texOP?: ItexImageDataInfo,\r\n): WebGLTexture {\r\n    texOP = texOP != null ? texOP : {};\r\n    deduceTextureimgSourceOption(gl, data, texOP);\r\n    let tex = gl.createTexture();\r\n    gl.bindTexture(texOP.target, tex);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_MAG_FILTER, texOP.filterMax);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_MIN_FILTER, texOP.filterMin);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_WRAP_S, texOP.wrapS);\r\n    gl.texParameteri(texOP.target, gl.TEXTURE_WRAP_T, texOP.wrapT);\r\n\r\n    gl.texImage2D(texOP.target, 0, texOP.pixelFormat, texOP.pixelFormat, texOP.pixelDatatype, data);\r\n\r\n    return tex;\r\n}\r\n\r\nfunction dedeuceBaseTextureOption(gl: WebGLRenderingContext, texOP: ItextureInfo) {\r\n    texOP.target = texOP.target ? texOP.target : GlConstants.TEXTURE_2D;\r\n    // texOP.wrap_s = texOP.wrap_s ? texOP.wrap_s : GLConstants.CLAMP_TO_EDGE;\r\n    // texOP.wrap_t = texOP.wrap_t ? texOP.wrap_t : GLConstants.CLAMP_TO_EDGE;\r\n    texOP.pixelFormat = texOP.pixelFormat ? texOP.pixelFormat : GlConstants.RGBA;\r\n\r\n    if (texOP.enableMipMap && canGenerateMipmap(gl, texOP.width, texOP.height)) {\r\n        texOP.enableMipMap = true;\r\n    } else {\r\n        texOP.enableMipMap = false;\r\n    }\r\n\r\n    if (texOP.filterMax == null) {\r\n        texOP.filterMax = texOP.enableMipMap ? GlConstants.LINEAR_MIPMAP_LINEAR : GlConstants.LINEAR;\r\n    }\r\n    if (texOP.filterMin == null) {\r\n        texOP.filterMin = texOP.enableMipMap ? GlConstants.LINEAR_MIPMAP_LINEAR : GlConstants.LINEAR;\r\n    }\r\n\r\n    if (texOP.wrapS == null) {\r\n        texOP.wrapS = canWrapReapeat(gl, texOP.width, texOP.height) ? GlConstants.REPEAT : GlConstants.CLAMP_TO_EDGE;\r\n    }\r\n    if (texOP.wrapT == null) {\r\n        texOP.wrapT = canWrapReapeat(gl, texOP.width, texOP.height) ? GlConstants.REPEAT : GlConstants.CLAMP_TO_EDGE;\r\n    }\r\n}\r\n\r\nexport function deduceTextureTypedArrayOption(\r\n    gl: WebGLRenderingContext,\r\n    data: ArrayBufferView,\r\n    texOP: ItexViewDataInfo,\r\n) {\r\n    dedeuceBaseTextureOption(gl, texOP);\r\n\r\n    if (texOP.pixelDatatype == null) {\r\n        texOP.pixelDatatype = getGLTypeForTypedArray(data);\r\n    }\r\n}\r\n\r\nexport function deduceTextureimgSourceOption(\r\n    gl: WebGLRenderingContext,\r\n    data: TexImageSource,\r\n    texOP: ItexImageDataInfo,\r\n) {\r\n    texOP.width = data.width;\r\n    texOP.height = data.height;\r\n    dedeuceBaseTextureOption(gl, texOP);\r\n    if (texOP.pixelDatatype == null) {\r\n        texOP.pixelDatatype = GlConstants.UNSIGNED_BYTE;\r\n    }\r\n}\r\n\r\nfunction isPowerOf2(value: number) {\r\n    return (value & (value - 1)) === 0;\r\n}\r\n\r\nfunction canGenerateMipmap(gl: WebGLRenderingContext, width: number, height: number) {\r\n    if (!gl.beWebgl2) {\r\n        return isPowerOf2(width) && isPowerOf2(height);\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction canWrapReapeat(gl: WebGLRenderingContext, width: number, height: number) {\r\n    if (!gl.beWebgl2) {\r\n        return isPowerOf2(width) && isPowerOf2(height);\r\n    }\r\n    return true;\r\n}\r\n","import { IcontextOptions, IgeometryInfo, IprogramInfo, Iobject, IbassProgramInfo } from \"./type\";\r\nimport { setGeometryWithAdvanced, setGeometryWithCached, setGeometry } from \"./geometryInfo\";\r\nimport { setProgram, setProgramWithCached } from \"./programInfo\";\r\n\r\ndeclare global {\r\n    interface WebGLVertexArrayObject extends WebGLObject {}\r\n\r\n    interface WebGLRenderingContext {\r\n        beWebgl2: boolean;\r\n\r\n        bindpoint: number;\r\n        beActiveVao: boolean;\r\n        beActiveInstance: boolean;\r\n\r\n        addExtension(extName: string): void;\r\n        createVertexArray(): any;\r\n        bindVertexArray(vao?: WebGLVertexArrayObject | null): void;\r\n        deleteVertexArray(vao: WebGLVertexArrayObject): void;\r\n\r\n        vertexAttribDivisor(index: number, divisor: number): void;\r\n        drawElementsInstanced(mode: number, count: number, type: number, offset: number, instanceCount: number): void;\r\n        drawArraysInstanced(mode: number, first: number, count: number, instanceCount: number): void;\r\n    }\r\n}\r\nWebGLRenderingContext.prototype.addExtension = function(extname: string): boolean {\r\n    let ext = this.getExtension(extname);\r\n    if (ext) {\r\n        switch (extname) {\r\n            case \"OES_vertex_array_object\":\r\n                this.bindVertexArray = ext.bindVertexArrayOES.bind(ext);\r\n                this.createVertexArray = ext.createVertexArrayOES.bind(ext);\r\n                this.deleteVertexArray = ext.deleteVertexArrayOES.bind(ext);\r\n                this.beActiveVao = true;\r\n                return true;\r\n            case \"ANGLE_instanced_arrays\":\r\n                this.vertexAttribDivisor = ext.vertexAttribDivisorANGLE.bind(ext);\r\n                this.drawElementsInstanced = ext.drawElementsInstancedANGLE.bind(ext);\r\n                this.drawArraysInstanced = ext.drawArraysInstancedANGLE.bind(ext);\r\n                this.beActiveInstance = true;\r\n                return true;\r\n\r\n            default:\r\n                console.warn(\"Not handle in addExtension, type: \" + extname);\r\n                return false;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nObject.defineProperty(WebGLRenderingContext, \"beWebgl2\", {\r\n    get: function() {\r\n        if (this.beWebgl2 == null) {\r\n            let version = this.getParameter(this.VERSION);\r\n            this.beWebgl2 = version.indexOf(\"WebGL 2.0\") === 0;\r\n        }\r\n        return this._beWebgl2;\r\n    },\r\n    set: function(value: boolean) {\r\n        this._beWebgl2 = value;\r\n    },\r\n});\r\n\r\nexport function setUpWebgl(canvas: HTMLCanvasElement, options: IcontextOptions = {}): WebGLRenderingContext {\r\n    let type = options.context || \"webgl\";\r\n    let gl = canvas.getContext(type, options.contextAtts) as WebGLRenderingContext;\r\n    if (options.extentions != null) {\r\n        options.extentions.forEach(ext => {\r\n            gl.addExtension(ext);\r\n        });\r\n    }\r\n    if (type == \"webgl2\") {\r\n        gl.beActiveInstance = true;\r\n        gl.beActiveVao = true;\r\n    }\r\n\r\n    // canvas.addEventListener('webglcontextlost', function (e)\r\n    // {\r\n    //     console.log(e);\r\n    // }, false);\r\n\r\n    return gl;\r\n}\r\n\r\nexport function setGeometryAndProgram(gl: WebGLRenderingContext, geometry: IgeometryInfo, program: IprogramInfo) {\r\n    setProgram(gl, program);\r\n    setGeometry(gl, geometry, program);\r\n}\r\n\r\nexport function setGeometryAndProgramWithCached(\r\n    gl: WebGLRenderingContext,\r\n    geometry: IgeometryInfo,\r\n    program: IprogramInfo,\r\n) {\r\n    setGeometryWithAdvanced(gl, geometry, program);\r\n    setProgramWithCached(gl, program);\r\n}\r\n\r\nexport function drawBufferInfo(gl: WebGLRenderingContext, geometry: IgeometryInfo, instanceCount?: number): void {\r\n    if (geometry.indices != null) {\r\n        if (instanceCount != null) {\r\n            gl.drawElementsInstanced(\r\n                geometry.primitiveType,\r\n                geometry.count,\r\n                geometry.indices.componentDataType,\r\n                geometry.offset || 0,\r\n                instanceCount,\r\n            );\r\n        } else {\r\n            gl.drawElements(\r\n                geometry.primitiveType,\r\n                geometry.count,\r\n                geometry.indices.componentDataType,\r\n                geometry.offset || 0,\r\n            );\r\n        }\r\n    } else {\r\n        if (instanceCount != null) {\r\n            gl.drawArraysInstanced(geometry.primitiveType, geometry.offset || 0, geometry.count, instanceCount);\r\n        } else {\r\n            gl.drawArrays(geometry.primitiveType, geometry.offset || 0, geometry.count);\r\n        }\r\n    }\r\n}\r\n\r\nexport function drawObject(gl: WebGLRenderingContext, obj: Iobject, instanceCount?: number) {\r\n    setGeometryAndProgramWithCached(gl, obj.geometry, obj.program);\r\n    drawBufferInfo(gl, obj.geometry, instanceCount);\r\n    if (gl.beActiveVao) {\r\n        gl.bindVertexArray(null);\r\n    }\r\n}\r\n\r\nexport * from \"./geometryInfo\";\r\nexport * from \"./programInfo\";\r\nexport * from \"./glconstant\";\r\nexport * from \"./state\";\r\nexport * from \"./texture\";\r\nexport * from \"./helper\";\r\n","import {\r\n    createBassProgramInfo,\r\n    createProgramInfo,\r\n    setProgram,\r\n    setGeometryWithAdvanced,\r\n    drawBufferInfo,\r\n    setUpWebgl,\r\n    createTextureFromImageSource,\r\n    createGeometryInfo,\r\n    setGeometry,\r\n} from \"../src/twebgl\";\r\n\r\nimport { IprogramState } from \"../src/type\";\r\n\r\nexport class DomeMatWithTex {\r\n    static run() {\r\n        let cc = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n        let gl = setUpWebgl(cc, { extentions: [\"OES_vertex_array_object\"] });\r\n        // let be2 = gl;\r\n        let geometry = createGeometryInfo(gl, {\r\n            atts: {\r\n                aPos: [-0.5, -0.5, 0.5, -0.5, 0.5, 0, 0.5, 0.5, 0, 0.5, -0.5, 0],\r\n                aUv: [0, 1, 0, 0, 1, 0, 1, 1],\r\n            },\r\n            indices: [0, 1, 2, 0, 3, 2],\r\n        });\r\n\r\n        let defErrorVs =\r\n            \"\\\r\n              attribute vec3 aPos;\\\r\n              void main()\\\r\n              {\\\r\n                  highp vec4 tmplet_1=vec4(aPos.xyz,1.0);\\\r\n                  gl_Position = tmplet_1;\\\r\n              }\";\r\n\r\n        let defErrorFs =\r\n            \"\\\r\n              uniform highp vec4 _MainColor;\\\r\n              void main()\\\r\n              {\\\r\n                  gl_FragData[0] = _MainColor;\\\r\n              }\";\r\n\r\n        let uniforms: { [key: string]: any } = {};\r\n        uniforms[\"_MainColor\"] = new Float32Array([0.5, 1, 0.5, 1]);\r\n        let bassporgram = createBassProgramInfo(gl, defErrorVs, defErrorFs, \"ssxx\");\r\n\r\n        let program = createProgramInfo(gl, { program: bassporgram, uniforms: uniforms });\r\n\r\n        let defVs =\r\n            \"\\\r\n              attribute vec3 aPos;\\\r\n              attribute vec2 aUv;\\\r\n              varying highp vec2 xlv_TEXCOORD0;   \\\r\n              void main()\\\r\n              {\\\r\n                  highp vec4 tmplet_1=vec4(aPos.xyz,1.0);\\\r\n                  xlv_TEXCOORD0=aUv;\\\r\n                  gl_Position = tmplet_1;\\\r\n              }\";\r\n\r\n        let defFs =\r\n            \"\\\r\n              uniform highp vec4 _MainColor;\\\r\n              varying highp vec2 xlv_TEXCOORD0;   \\\r\n              uniform sampler2D _MainTex;\\\r\n              void main()\\\r\n              {\\\r\n                  lowp vec4 tmplet_3= texture2D(_MainTex, xlv_TEXCOORD0);\\\r\n                  gl_FragData[0] = _MainColor*tmplet_3;\\\r\n              }\";\r\n\r\n        let state: IprogramState = { depthTest: false };\r\n        let imag = new Image();\r\n        imag.src = \"./res/tes.png\";\r\n        imag.onload = () => {\r\n            uniforms[\"_MainTex\"] = createTextureFromImageSource(gl, imag);\r\n            program = createProgramInfo(gl, {\r\n                program: { vs: defVs, fs: defFs, name: \"ssxxss\" },\r\n                uniforms: uniforms,\r\n                states: state,\r\n            });\r\n        };\r\n\r\n        let render = () => {\r\n            gl.clearColor(0.5, 0.1, 0.5, 1);\r\n            gl.clearDepth(0);\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n            // gl.useProgram(program.program);\r\n            setProgram(gl, program);\r\n            setGeometry(gl, geometry, program);\r\n            drawBufferInfo(gl, geometry);\r\n\r\n            requestAnimationFrame(() => {\r\n                render();\r\n            });\r\n        };\r\n        render();\r\n    }\r\n}\r\n","console.log(\"@@@@@@@@@@@@@\");\r\nimport { DemoInstance } from \"./instance\";\r\nimport { DemoVao } from \"./vao\";\r\nimport { DomeMatWithTex } from \"./matwithTex\";\r\n\r\nwindow.onload = () => {\r\n    // DemoInstance.run();\r\n    // DemoVao.run();\r\n    DomeMatWithTex.run();\r\n};\r\n"],"names":["GlConstants"],"mappings":"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"}